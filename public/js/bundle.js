parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"Zpwf":[function(require,module,exports) {
"use strict";function n(n,e,r){var s=n;return arguments.length>3&&void 0!==arguments[3]&&arguments[3]?(s.disabled=!0,void(s.innerHTML=e)):s.disabled?(s.disabled=!1,void(s.innerHTML=e)):(s.disabled=!0,void(s.innerHTML='<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> '.concat(r,"...")))}function e(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Loading",r=n;"TBODY"===r.tagName||"TABLE"===n.tagName?n.innerHTML='\n      <tr>\n        <td colspan="100%" class="text-slate-600">\n          <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> '.concat(e,"\n        </td>\n      </tr>\n    "):r.innerHTML='<p class="text-slate-600 p-2 m-0"><span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> '.concat(e,"</p>")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.buttonSpinner=n,exports.spinner=e;
},{}],"WyUo":[function(require,module,exports) {
"use strict";function t(r){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(r)}function r(){r=function(){return n};var e,n={},o=Object.prototype,a=o.hasOwnProperty,i=Object.defineProperty||function(t,r,e){t[r]=e.value},c="function"==typeof Symbol?Symbol:{},u=c.iterator||"@@iterator",s=c.asyncIterator||"@@asyncIterator",f=c.toStringTag||"@@toStringTag";function h(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{h({},"")}catch(e){h=function(t,r,e){return t[r]=e}}function l(t,r,e,n){var o=r&&r.prototype instanceof w?r:w,a=Object.create(o.prototype),c=new N(n||[]);return i(a,"_invoke",{value:S(t,e,c)}),a}function p(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}n.wrap=l;var v="suspendedStart",y="suspendedYield",d="executing",g="completed",m={};function w(){}function x(){}function b(){}var L={};h(L,u,function(){return this});var E=Object.getPrototypeOf,_=E&&E(E(T([])));_&&_!==o&&a.call(_,u)&&(L=_);var O=b.prototype=w.prototype=Object.create(L);function j(t){["next","throw","return"].forEach(function(r){h(t,r,function(t){return this._invoke(r,t)})})}function k(r,e){function n(o,i,c,u){var s=p(r[o],r,i);if("throw"!==s.type){var f=s.arg,h=f.value;return h&&"object"==t(h)&&a.call(h,"__await")?e.resolve(h.__await).then(function(t){n("next",t,c,u)},function(t){n("throw",t,c,u)}):e.resolve(h).then(function(t){f.value=t,c(f)},function(t){return n("throw",t,c,u)})}u(s.arg)}var o;i(this,"_invoke",{value:function(t,r){function a(){return new e(function(e,o){n(t,r,e,o)})}return o=o?o.then(a,a):a()}})}function S(t,r,n){var o=v;return function(a,i){if(o===d)throw Error("Generator is already running");if(o===g){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===v)throw o=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=p(t,r,n);if("normal"===s.type){if(o=n.done?g:y,s.arg===m)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=g,n.method="throw",n.arg=s.arg)}}}function P(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,P(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var a=p(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,m;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function D(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function G(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(D,this),this.reset(!0)}function T(r){if(r||""===r){var n=r[u];if(n)return n.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var o=-1,i=function t(){for(;++o<r.length;)if(a.call(r,o))return t.value=r[o],t.done=!1,t;return t.value=e,t.done=!0,t};return i.next=i}}throw new TypeError(t(r)+" is not iterable")}return x.prototype=b,i(O,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:x,configurable:!0}),x.displayName=h(b,f,"GeneratorFunction"),n.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===x||"GeneratorFunction"===(r.displayName||r.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,h(t,f,"GeneratorFunction")),t.prototype=Object.create(O),t},n.awrap=function(t){return{__await:t}},j(k.prototype),h(k.prototype,s,function(){return this}),n.AsyncIterator=k,n.async=function(t,r,e,o,a){void 0===a&&(a=Promise);var i=new k(l(t,r,e,o),a);return n.isGeneratorFunction(r)?i:i.next().then(function(t){return t.done?t.value:i.next()})},j(O),h(O,f,"Generator"),h(O,u,function(){return this}),h(O,"toString",function(){return"[object Generator]"}),n.keys=function(t){var r=Object(t),e=[];for(var n in r)e.push(n);return e.reverse(),function t(){for(;e.length;){var n=e.pop();if(n in r)return t.value=n,t.done=!1,t}return t.done=!0,t}},n.values=T,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(G),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=a.call(i,"catchLoc"),s=a.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=r&&r<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=r,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(i)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),m},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),G(e),m}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;G(e)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:T(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},n}function e(t,r,e,n,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void e(t)}c.done?r(u):Promise.resolve(u).then(n,o)}function n(t){return function(){var r=this,n=arguments;return new Promise(function(o,a){var i=t.apply(r,n);function c(t){e(i,o,a,c,u,"next",t)}function u(t){e(i,o,a,c,u,"throw",t)}c(void 0)})}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.postData=exports.patchData=exports.fetchData=exports.deleteData=void 0;var o=exports.fetchData=function(){var t=n(r().mark(function t(e){var n,o,a=arguments;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},t.prev=1,t.next=4,axios.get(e,n);case 4:return o=t.sent,t.abrupt("return",o.data);case 8:throw t.prev=8,t.t0=t.catch(1),t.t0;case 11:case"end":return t.stop()}},t,null,[[1,8]])}));return function(r){return t.apply(this,arguments)}}(),a=exports.postData=function(){var t=n(r().mark(function t(e){var n,o,a=arguments;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},t.prev=1,t.next=4,axios.post(e,n);case 4:return o=t.sent,t.abrupt("return",o.data);case 8:throw t.prev=8,t.t0=t.catch(1),t.t0;case 11:case"end":return t.stop()}},t,null,[[1,8]])}));return function(r){return t.apply(this,arguments)}}(),i=exports.patchData=function(){var t=n(r().mark(function t(e){var n,o,a=arguments;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},t.prev=1,t.next=4,axios.patch(e,n);case 4:return o=t.sent,t.abrupt("return",o.data);case 8:throw t.prev=8,t.t0=t.catch(1),t.t0;case 11:case"end":return t.stop()}},t,null,[[1,8]])}));return function(r){return t.apply(this,arguments)}}(),c=exports.deleteData=function(){var t=n(r().mark(function t(e){var n;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,axios.delete(e);case 3:return n=t.sent,t.abrupt("return",n.data);case 7:throw t.prev=7,t.t0=t.catch(0),t.t0;case 10:case"end":return t.stop()}},t,null,[[0,7]])}));return function(r){return t.apply(this,arguments)}}();
},{}],"IxEj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./spinner.js"),e=require("./http.js");function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(){n=function(){return e};var t,e={},o=Object.prototype,i=o.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},c="function"==typeof Symbol?Symbol:{},u=c.iterator||"@@iterator",s=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function h(t,e,r,n){var o=e&&e.prototype instanceof b?e:b,i=Object.create(o.prototype),c=new N(n||[]);return a(i,"_invoke",{value:S(t,r,c)}),i}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var d="suspendedStart",v="suspendedYield",y="executing",g="completed",m={};function b(){}function w(){}function x(){}var P={};f(P,u,function(){return this});var L=Object.getPrototypeOf,E=L&&L(L(A([])));E&&E!==o&&i.call(E,u)&&(P=E);var k=x.prototype=b.prototype=Object.create(P);function j(t){["next","throw","return"].forEach(function(e){f(t,e,function(t){return this._invoke(e,t)})})}function O(t,e){function n(o,a,c,u){var s=p(t[o],t,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==r(f)&&i.call(f,"__await")?e.resolve(f.__await).then(function(t){n("next",t,c,u)},function(t){n("throw",t,c,u)}):e.resolve(f).then(function(t){l.value=t,c(l)},function(t){return n("throw",t,c,u)})}u(s.arg)}var o;a(this,"_invoke",{value:function(t,r){function i(){return new e(function(e,o){n(t,r,e,o)})}return o=o?o.then(i,i):i()}})}function S(e,r,n){var o=d;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===g){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=C(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var s=p(e,r,n);if("normal"===s.type){if(o=n.done?g:v,s.arg===m)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=g,n.method="throw",n.arg=s.arg)}}}function C(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,C(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=p(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function A(e){if(e||""===e){var n=e[u];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(i.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(r(e)+" is not iterable")}return w.prototype=x,a(k,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:w,configurable:!0}),w.displayName=f(x,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,f(t,l,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},j(O.prototype),f(O.prototype,s,function(){return this}),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(h(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},j(k),f(k,l,"Generator"),f(k,u,function(){return this}),f(k,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=A,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=i.call(a,"catchLoc"),s=i.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),T(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:A(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function o(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function i(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function c(t){o(a,n,i,c,u,"next",t)}function u(t){o(a,n,i,c,u,"throw",t)}c(void 0)})}}function a(t){return l(t)||s(t)||u(t)||c()}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t,e){if(t){if("string"==typeof t)return f(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(t,e):void 0}}function s(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function l(t){if(Array.isArray(t))return f(t)}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,v(n.key),n)}}function d(t,e,r){return e&&p(t.prototype,e),r&&p(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function v(t){var e=y(t,"string");return"symbol"==r(e)?e:e+""}function y(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var g=function(){return d(function t(e){var r=e.container,n=e.paginationContainer,o=e.endpoint,i=e.type,a=e.itemsPerPage,c=void 0===a?1:a;h(this,t),this.container=r,this.paginationContainer=n,this.endpoint=o,this.type=i,this.itemsPerPage=c,this.currentPage=1},[{key:"createCard",value:function(t){var e,r,n='\n      <div class="col">\n        <div class="card shadow">\n          <div class="card-body rounded">\n            <h4 class="card-title text-slate-900 fw-semibold">'.concat(t.name,'</h4>\n            <p class="card-text text-slate-600">\n              ').concat(null===(e=t.richDescription)||void 0===e?void 0:e.slice(0,100),"\n              ").concat(t.richDescription.length>100?"...":"","\n            </p>\n            ").concat(null!==(r=t.imageCover)&&void 0!==r&&r.signedUrl?'<img class="object-fit-cover border rounded-3" src="'.concat(t.imageCover.signedUrl,'" alt="').concat(t.name,'" width="100%" height="200" />'):"",'\n            <a class="btn bg-green-500 text-slate-50 mt-3" href="/').concat(this.type,"/").concat(t.slug,'">Read More ⟶</a>\n          </div>\n        </div>\n      </div>\n    ');this.container.innerHTML+=n}},{key:"renderPagination",value:function(t,e){var r=this,n=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=document.createElement("li");return i.className="page-item ".concat(n?"active":""," ").concat(o?"disabled":""),i.innerHTML='<a class="page-link">'.concat(t,"</a>"),o||e===r.currentPage||i.addEventListener("click",function(){return r.changePage(e)}),i};this.paginationContainer.appendChild(n("«",this.currentPage-1,!1,1===this.currentPage)),(t<=5?a(Array(t).keys()).map(function(t){return t+1}):[1].concat(a(this.currentPage>4?["..."]:[]),a(a(Array(5).keys()).map(function(t){return t+r.currentPage-2}).filter(function(e){return e>1&&e<t})),a(this.currentPage<t-3?["..."]:[]),[t])).forEach(function(t){if("..."===t){var e=document.createElement("li");e.className="page-item disabled",e.innerHTML='<a class="page-link">...</a>',r.paginationContainer.appendChild(e)}else r.paginationContainer.appendChild(n(t,t,t===r.currentPage))}),this.paginationContainer.appendChild(n("»",this.currentPage+1,!1,!e))}},{key:"render",value:function(){var r=i(n().mark(function r(){var o,i,a,c,u=this;return n().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return(0,t.spinner)(this.container,"Loading ".concat(this.type)),r.prev=1,r.next=4,(0,e.fetchData)("".concat(this.endpoint,"?page=").concat(this.currentPage,"&limit=").concat(this.itemsPerPage));case 4:if(o=r.sent,this.container.innerHTML="",this.paginationContainer.innerHTML="",i=o.data.doc,a=o.totalPages,c=this.currentPage<a,i.length){r.next=13;break}return this.container.innerHTML='<p class="fs-6 text-slate-400">No '.concat(this.type," available.</p>"),r.abrupt("return");case 13:i.forEach(function(t){return u.createCard(t)}),a>1&&this.renderPagination(a,c),r.next=20;break;case 17:throw r.prev=17,r.t0=r.catch(1),r.t0;case 20:case"end":return r.stop()}},r,this,[[1,17]])}));return function(){return r.apply(this,arguments)}}()},{key:"changePage",value:function(){var t=i(n().mark(function t(e){return n().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e<1)){t.next=2;break}return t.abrupt("return");case 2:return this.currentPage=e,t.prev=3,t.next=6,this.render();case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(3),this.container.innerHTML='<p class="text-danger">Failed to load '.concat(this.type,". Please try again later.</p>");case 11:case"end":return t.stop()}},t,this,[[3,8]])}));return function(e){return t.apply(this,arguments)}}()}])}(),m=exports.default=g;
},{"./spinner.js":"Zpwf","./http.js":"WyUo"}],"mLZw":[function(require,module,exports) {
"use strict";var e=t(require("../utils/PaginatedList.js"));function t(e){return e&&e.__esModule?e:{default:e}}var n=document.querySelector("#project-list-container"),r=document.querySelector("#project-list-pagination"),i=null;n&&(i||(i=new e.default({container:n,paginationContainer:r,endpoint:"/api/v1/projects",type:"projects",itemsPerPage:1})),i.render());
},{"../utils/PaginatedList.js":"IxEj"}],"tFEn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.PaginatedAdminPaymentList=exports.PaginatedAdminBookingEvent=exports.PaginatedAdminAddressList=exports.GarbageCollectionManagement=void 0;var t=r(require("./PaginatedList.js")),e=require("./http.js"),n=require("./spinner.js");function r(t){return t&&t.__esModule?t:{default:t}}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t){return s(t)||c(t)||d(t)||i()}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function s(t){if(Array.isArray(t))return h(t)}function l(t,e){return p(t)||f(t,e)||d(t,e)||u()}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(t,e){if(t){if("string"==typeof t)return h(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(t,e):void 0}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function f(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o,i,c=[],s=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(c.push(r.value),c.length!==e);s=!0);}catch(t){l=!0,a=t}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw a}}return c}}function p(t){if(Array.isArray(t))return t}function y(){y=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},c=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function d(t,e,n,r){var a=e&&e.prototype instanceof m?e:m,i=Object.create(a.prototype),c=new M(r||[]);return o(i,"_invoke",{value:j(t,n,c)}),i}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=d;var f="suspendedStart",p="suspendedYield",v="executing",g="completed",b={};function m(){}function w(){}function x(){}var P={};u(P,c,function(){return this});var L=Object.getPrototypeOf,C=L&&L(L(D([])));C&&C!==n&&r.call(C,c)&&(P=C);var k=x.prototype=m.prototype=Object.create(P);function E(t){["next","throw","return"].forEach(function(e){u(t,e,function(t){return this._invoke(e,t)})})}function T(t,e){function n(o,i,c,s){var l=h(t[o],t,i);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==a(d)&&r.call(d,"__await")?e.resolve(d.__await).then(function(t){n("next",t,c,s)},function(t){n("throw",t,c,s)}):e.resolve(d).then(function(t){u.value=t,c(u)},function(t){return n("throw",t,c,s)})}s(l.arg)}var i;o(this,"_invoke",{value:function(t,r){function a(){return new e(function(e,a){n(t,r,e,a)})}return i=i?i.then(a,a):a()}})}function j(e,n,r){var a=f;return function(o,i){if(a===v)throw Error("Generator is already running");if(a===g){if("throw"===o)throw i;return{value:t,done:!0}}for(r.method=o,r.arg=i;;){var c=r.delegate;if(c){var s=_(c,r);if(s){if(s===b)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===f)throw a=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=v;var l=h(e,n,r);if("normal"===l.type){if(a=r.done?g:p,l.arg===b)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(a=g,r.method="throw",r.arg=l.arg)}}}function _(e,n){var r=n.method,a=e.iterator[r];if(a===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,_(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var o=h(a,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,b;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,b):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function M(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function D(e){if(e||""===e){var n=e[c];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(a(e)+" is not iterable")}return w.prototype=x,o(k,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:w,configurable:!0}),w.displayName=u(x,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,l,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},E(T.prototype),u(T.prototype,s,function(){return this}),e.AsyncIterator=T,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new T(d(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then(function(t){return t.done?t.value:i.next()})},E(k),u(k,l,"Generator"),u(k,c,function(){return this}),u(k,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=D,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return c.type="throw",c.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),A(n),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var a=r.arg;A(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:D(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),b}},e}function v(t,e,n,r,a,o,i){try{var c=t[o](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,a)}function g(t){return function(){var e=this,n=arguments;return new Promise(function(r,a){var o=t.apply(e,n);function i(t){v(o,r,a,i,c,"next",t)}function c(t){v(o,r,a,i,c,"throw",t)}i(void 0)})}}function b(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,x(r.key),r)}}function w(t,e,n){return e&&m(t.prototype,e),n&&m(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function x(t){var e=P(t,"string");return"symbol"==a(e)?e:e+""}function P(t,e){if("object"!=a(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function L(t,e,n){return e=T(e),C(t,E()?Reflect.construct(e,n||[],T(t).constructor):e.apply(t,n))}function C(t,e){if(e&&("object"==a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return k(t)}function k(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function E(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(E=function(){return!!t})()}function T(t){return(T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function j(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_(t,e)}function _(t,e){return(_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var O=function(r){function a(t){var e,n=t.container,r=t.paginationContainer,o=t.endpoint,i=t.type,c=t.itemsPerPage,s=void 0===c?1:c,l=t.sort,u=void 0===l?"_id":l;return b(this,a),(e=L(this,a,[{container:n,paginationContainer:r,endpoint:o,type:i,itemsPerPage:s}])).sort=u,e.abortController=null,e}return j(a,t.default),w(a,[{key:"createCard",value:function(t){var e='\n    <tr class="'.concat(t.isFeatured?"table-success":"",'">\n      <td class="text-slate-800" style="vertical-align: middle">').concat(t.name,'</td>\n      <td class="text-slate-800" style="vertical-align: middle;">').concat(new Date(t.date).toLocaleString("en-PH",{month:"long",day:"numeric",year:"numeric"}),'\n      </td>\n      <td>\n        <a class="btn text-slate-800" href="/').concat(this.type,"/").concat(t.slug,'"><i class="bi bi-eye"></i></a>\n        <a class="btn border-0 text-slate-800" href="/').concat(this.type,"/").concat(t.slug,"/edit?type=").concat(this.type,'"><i class="bi bi-pencil-square"></i></a>\n        <button type="button" data-id="').concat(t._id,'" data-type="').concat(this.type,'" data-title="').concat(t.name,'" data-bs-toggle="modal" data-bs-target="#modalDeleteDashboard" class="btn border-0 text-slate-800"><i class="bi bi-trash"></i></button>\n      </td>\n    </tr>\n    ');this.container.innerHTML+=e}},{key:"render",value:function(){var t=g(y().mark(function t(){var r,a,o,i,c,s,l=this;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.abortController&&this.abortController.abort(),(0,n.spinner)(this.container),t.prev=2,this.abortController=new AbortController,r=this.endpoint.includes("search")?"".concat(this.endpoint,"&page=").concat(this.currentPage,"&limit=").concat(this.itemsPerPage,"&sort=").concat(this.sort):"".concat(this.endpoint,"?page=").concat(this.currentPage,"&limit=").concat(this.itemsPerPage,"&sort=").concat(this.sort),t.next=7,(0,e.fetchData)(r,{signal:this.abortController.signal});case 7:if(a=t.sent,this.container.innerHTML="",this.paginationContainer.innerHTML="",o=a.data.doc,i=a.totalPages,c=this.currentPage<i,!o._id){t.next=16;break}return this.createCard(o),t.abrupt("return");case 16:if(o.length){t.next=19;break}return this.container.innerHTML='<p class="fs-6 text-slate-400">No '.concat(this.type," available.</p>"),t.abrupt("return");case 19:1===this.currentPage&&(s=o.find(function(t){return!0===t.isFeatured}))&&this.createCard(s),o.forEach(function(t){return!t.isFeatured&&l.createCard(t)}),i>1&&this.renderPagination(i,c),t.next=27;break;case 24:t.prev=24,t.t0=t.catch(2),"CanceledError"===t.t0.name?this.container.innerHTML='\n        <tr>\n          <td colspan="100%">\n             <p class="text-red-600 m-0">Previous request was cancelled.</p>\n          </td>\n        </tr>\n      ':this.container.innerHTML='\n        <tr>\n          <td colspan="100%">\n             <p class="text-red-600 m-0">Failed to load '.concat(this.type,". Please try again later</p>\n          </td>\n        </tr>\n        ");case 27:case"end":return t.stop()}},t,this,[[2,24]])}));return function(){return t.apply(this,arguments)}}()}])}(),A=exports.PaginatedAdminAddressList=function(t){function e(t){var n=t.container,r=t.paginationContainer,a=t.endpoint,o=t.type,i=t.itemsPerPage,c=void 0===i?1:i,s=t.sort,l=void 0===s?"_id":s;return b(this,e),L(this,e,[{container:n,paginationContainer:r,endpoint:a,type:o,itemsPerPage:c,sort:l}])}return j(e,O),w(e,[{key:"createCard",value:function(t){var e='\n    <tr>\n      <td class="text-slate-800" style="vertical-align: middle">'.concat(t.phase,'</td>\n      <td class="text-slate-800" style="vertical-align: middle">').concat(t.block,'</td>\n      <td class="text-slate-800" style="vertical-align: middle">').concat(t.lot,'</td>\n      <td class="text-slate-800" style="vertical-align: middle">').concat(t.street,'</td>\n      <td class="text-slate-800" style="vertical-align: middle">').concat(t.status,'</td>\n      <td data-id="').concat(t._id,'" data-address="').concat(t.completeAddress,'">\n          <button id="edit-btn" class="btn" type="button" data-bs-toggle="modal" data-bs-target="#addressModal">\n            <i class="bi bi-pencil-square"></i>\n          </button>\n          <button id="delete-btn" class="btn" type="button" data-bs-toggle="modal" data-bs-target="#delete">\n            <i class="bi bi-trash"></i>\n          </button>\n      </td>\n    </tr>\n    ');this.container.innerHTML+=e}}])}(),M=exports.PaginatedAdminPaymentList=function(t){function r(t){var e,n=t.container,a=t.paginationContainer,o=t.endpoint,i=t.type,c=t.itemsPerPage,s=void 0===c?1:c,l=t.sort,u=void 0===l?"_id":l,d=t.fromDate,h=t.toDate;return b(this,r),(e=L(this,r,[{container:n,paginationContainer:a,endpoint:o,type:i,itemsPerPage:s,sort:u}])).fromDate=d,e.toDate=h,e.abortController=null,e}return j(r,O),w(r,[{key:"createCard",value:function(t,e){var n=(this.currentPage-1)*this.itemsPerPage+e+1,r='\n    <tr class="text-slate-800">\n      <td style="vertical-align: middle">'.concat(n,'</td>\n      <td style="vertical-align: middle">').concat(t.formattedDateRange,'</td>\n      <td style="vertical-align: middle">').concat(t.amount,'</td>\n      <td style="vertical-align: middle">').concat(new Intl.DateTimeFormat("en-us",{year:"numeric",month:"long",day:"2-digit",timeZone:"Asia/Manila"}).format(new Date(t.paymentDate)),'</td>\n      <td style="vertical-align: middle">').concat(t.stripeSessionId||"NA",'</td>\n      <td style="vertical-align: middle">').concat(t.paymentMethod,"</td>\n    </tr>\n    ");this.container.innerHTML+=r}},{key:"render",value:function(){var t=g(y().mark(function t(){var r,a,o,i,c,s,l=this;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.abortController&&this.abortController.abort(),(0,n.spinner)(this.container),t.prev=2,this.abortController=new AbortController,r="".concat(this.endpoint),(this.endpoint.includes("email")||this.endpoint.includes("phase"))&&(r+="&page=".concat(this.currentPage,"&limit=").concat(this.itemsPerPage,"&sort=").concat(this.sort)),this.fromDate&&this.toDate&&(r+="&fromDate=".concat(this.fromDate,"&toDate=").concat(this.toDate)),t.next=9,(0,e.fetchData)(r,{signal:this.abortController.signal});case 9:if(a=t.sent,this.container.innerHTML="",this.paginationContainer.innerHTML="",o=a.data.doc,i=a.totalPages,c=this.currentPage<i,!o._id){t.next=18;break}return this.createCard(o),t.abrupt("return");case 18:if(o.length){t.next=21;break}return this.container.innerHTML='<tr>\n          <td colspan="100%" class="fs-6 text-slate-400">Either no '.concat(this.type.slice(0,this.type.length-1)," record exists or no ").concat(this.type.slice(0,this.type.length-1)," date is recorded.</td>\n        </tr>"),t.abrupt("return");case 21:1===this.currentPage&&(s=o.find(function(t){return!0===t.isFeatured}))&&this.createCard(s),o.forEach(function(t,e){return!t.isFeatured&&l.createCard(t,e)}),i>1&&this.renderPagination(i,c),t.next=29;break;case 26:throw t.prev=26,t.t0=t.catch(2),t.t0;case 29:case"end":return t.stop()}},t,this,[[2,26]])}));return function(){return t.apply(this,arguments)}}()}])}(),D=exports.PaginatedAdminBookingEvent=function(t){function r(t){var e,n=t.container,a=t.paginationContainer,o=t.endpoint,i=t.type,c=t.itemsPerPage,s=void 0===c?1:c,l=t.sort,u=void 0===l?"-createdAt":l;return b(this,r),(e=L(this,r,[{container:n,paginationContainer:a,endpoint:o,type:i,itemsPerPage:s,sort:u}])).abortController=null,e}return j(r,O),w(r,[{key:"createCard",value:function(t,e){var n='\n    <tr class="text-slate-800">\n      <td style="vertical-align: middle">'.concat(t.user.name,'</td>\n      <td style="vertical-align: middle">').concat(t.place,'</td>\n      <td style="vertical-align: middle">').concat(t.user.contactNumber,'</td>\n      <td style="vertical-align: middle">').concat(t.user.email,'</td>\n      <td style="vertical-align: middle">').concat(t.user.address.completeAddress,'</td>\n      <td style="vertical-align: middle">').concat(t.approvedBy?t.approvedBy.name:"",'</td>\n      <td style="vertical-align: middle">\n        <button class="btn bg-').concat(t.approved?"yellow":"green",'-700 text-slate-100 fw-semibold" data-eventstatus="').concat(t.approved?"disapprove":"approve",'" data-eventid="').concat(t._id,'">').concat(t.approved?"Unapprove":"Approve","</button>\n      </td>\n    </tr>\n    ");this.container.innerHTML+=n}},{key:"render",value:function(){var t=g(y().mark(function t(){var r,a,o,i,c,s,l=this;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.abortController&&this.abortController.abort(),(0,n.spinner)(this.container),t.prev=2,this.abortController=new AbortController,r=this.endpoint.includes("email")?"".concat(this.endpoint,"&page=").concat(this.currentPage,"&limit=").concat(this.itemsPerPage,"&sort=").concat(this.sort):"".concat(this.endpoint,"?page=").concat(this.currentPage,"&limit=").concat(this.itemsPerPage,"&sort=").concat(this.sort),t.next=7,(0,e.fetchData)(r,{signal:this.abortController.signal});case 7:if(a=t.sent,this.container.innerHTML="",this.paginationContainer.innerHTML="",o=a.data.doc,i=a.totalPages,c=this.currentPage<i,o.length){t.next=16;break}return this.container.innerHTML='<p class="fs-6 text-slate-400">No '.concat(this.type," available.</p>"),t.abrupt("return");case 16:1===this.currentPage&&(s=o.find(function(t){return!0===t.isFeatured}))&&this.createCard(s),o.forEach(function(t){return!t.isFeatured&&l.createCard(t)}),i>1&&this.renderPagination(i,c),t.next=28;break;case 21:if(t.prev=21,t.t0=t.catch(2),"CanceledError"!==t.t0.name){t.next=27;break}this.container.innerHTML='\n        <tr>\n          <td colspan="100%">\n             <p class="text-red-600 m-0">Previous request was cancelled.</p>\n          </td>\n        </tr>\n      ',t.next=28;break;case 27:throw t.t0;case 28:case"end":return t.stop()}},t,this,[[2,21]])}));return function(){return t.apply(this,arguments)}}()}])}(),S=exports.GarbageCollectionManagement=function(){return w(function t(e){var n=e.container,r=e.endpoint,a=e.type,o=e.sort,i=void 0===o?"phase":o;b(this,t),this.container=n,this.endpoint=r,this.type=a,this.sort=i,this.abortController=null},[{key:"timeToDate",value:function(t){var e=l(t.split(":"),2),n=e[0],r=e[1],a=new Date;return a.setHours(n,r,0,0),a}},{key:"createCard",value:function(t,e){var n="\n            <tr>\n                <td>".concat(t.day,"</td>\n                <td>").concat(t.timeLocation.time,"</td>\n                <td>").concat(t.timeLocation.street,"</td>\n                <td>Update, Delete</td>\n            </tr>\n        ");e.innerHTML+=n}},{key:"createDiv",value:function(t){var e='\n        <div id="collection'.concat(t,'">\n          <h3 class="fs-6">Phase ').concat(t,'</h3>\n          <table id="collectionTable').concat(t,'" class="table">\n            <thead class="fw-bold">\n              <td>Day</td>\n              <td>Time</td>\n              <td>Street</td>\n              <td>Action</td>\n            </thead>\n            <tbody id="collectionBody').concat(t,'"></tbody>\n          </table>\n        </div>\n    ');this.container.insertAdjacentHTML("afterbegin",e)}},{key:"render",value:function(){var t=g(y().mark(function t(){var r,a,i,c=this;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.abortController&&this.abortController.abort(),(0,n.spinner)(this.container),t.prev=2,this.abortController=new AbortController,r="".concat(this.endpoint,"?sort=").concat(this.sort),t.next=7,(0,e.fetchData)(r,{signal:this.abortController.signal});case 7:if(a=t.sent,this.container.innerHTML="",(i=a.data.doc).length){t.next=13;break}return this.container.innerHTML='<p class="fs-6 text-slate-400">No '.concat(this.type," available.</p>"),t.abrupt("return");case 13:o(new Set(i.map(function(t){return t.phase}))).forEach(function(t){c.createDiv(t);var e=i.filter(function(e){return e.phase===t}),n=document.querySelector("#collectionBody".concat(t));e.forEach(function(t){return c.createCard(t,n)})}),t.next=24;break;case 17:if(t.prev=17,t.t0=t.catch(2),"CanceledError"!==t.t0.name){t.next=23;break}this.container.innerHTML='\n        <tr>\n          <td colspan="100%">\n             Previous request was canceled.\n          </td>\n        </tr>\n      ',t.next=24;break;case 23:throw t.t0;case 24:case"end":return t.stop()}},t,this,[[2,17]])}));return function(){return t.apply(this,arguments)}}()}])}(),H=exports.default=O;
},{"./PaginatedList.js":"IxEj","./http.js":"WyUo","./spinner.js":"Zpwf"}],"VDCA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.showAlert=exports.hideAlert=void 0;var e=exports.hideAlert=function(){var e=document.querySelector(".alert-con");e&&e.parentElement.removeChild(e)},t=exports.showAlert=function(t,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;e();var s='<div class="container alert-con position-fixed" style="top: 10px; z-index: 1070; left: 50%; transform: translateX(-50%);">\n    <div class="alert alert-'.concat("error"===t?"danger":"success",' alert-dismissible fade show w-100 text-slate-700" role="alert"><span>').concat(r,'</span>\n      <button class="btn-close" type="button" data-bs-dismiss="alert" aria-label="Close"></button>\n    </div>\n  </div>');document.querySelector("body").insertAdjacentHTML("afterbegin",s),window.setTimeout(e,1e3*o)};
},{}],"QCyM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.searchSlug=void 0;var t=require("./spinner.js"),r=require("./http.js"),e=require("./alerts.js");function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(){o=function(){return r};var t,r={},e=Object.prototype,i=e.hasOwnProperty,a=Object.defineProperty||function(t,r,e){t[r]=e.value},c="function"==typeof Symbol?Symbol:{},u=c.iterator||"@@iterator",s=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function h(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{h({},"")}catch(t){h=function(t,r,e){return t[r]=e}}function f(t,r,e,n){var o=r&&r.prototype instanceof w?r:w,i=Object.create(o.prototype),c=new F(n||[]);return a(i,"_invoke",{value:k(t,e,c)}),i}function p(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}r.wrap=f;var v="suspendedStart",y="suspendedYield",d="executing",g="completed",m={};function w(){}function b(){}function x(){}var L={};h(L,u,function(){return this});var E=Object.getPrototypeOf,S=E&&E(E(T([])));S&&S!==e&&i.call(S,u)&&(L=S);var j=x.prototype=w.prototype=Object.create(L);function _(t){["next","throw","return"].forEach(function(r){h(t,r,function(t){return this._invoke(r,t)})})}function O(t,r){function e(o,a,c,u){var s=p(t[o],t,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==n(h)&&i.call(h,"__await")?r.resolve(h.__await).then(function(t){e("next",t,c,u)},function(t){e("throw",t,c,u)}):r.resolve(h).then(function(t){l.value=t,c(l)},function(t){return e("throw",t,c,u)})}u(s.arg)}var o;a(this,"_invoke",{value:function(t,n){function i(){return new r(function(r,o){e(t,n,r,o)})}return o=o?o.then(i,i):i()}})}function k(r,e,n){var o=v;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===g){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===v)throw o=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=p(r,e,n);if("normal"===s.type){if(o=n.done?g:y,s.arg===m)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=g,n.method="throw",n.arg=s.arg)}}}function P(r,e){var n=e.method,o=r.iterator[n];if(o===t)return e.delegate=null,"throw"===n&&r.iterator.return&&(e.method="return",e.arg=t,P(r,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=p(o,r.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,m;var a=i.arg;return a?a.done?(e[r.resultName]=a.value,e.next=r.nextLoc,"return"!==e.method&&(e.method="next",e.arg=t),e.delegate=null,m):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,m)}function N(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function G(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function F(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(N,this),this.reset(!0)}function T(r){if(r||""===r){var e=r[u];if(e)return e.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var o=-1,a=function e(){for(;++o<r.length;)if(i.call(r,o))return e.value=r[o],e.done=!1,e;return e.value=t,e.done=!0,e};return a.next=a}}throw new TypeError(n(r)+" is not iterable")}return b.prototype=x,a(j,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:b,configurable:!0}),b.displayName=h(x,l,"GeneratorFunction"),r.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===b||"GeneratorFunction"===(r.displayName||r.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,h(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},r.awrap=function(t){return{__await:t}},_(O.prototype),h(O.prototype,s,function(){return this}),r.AsyncIterator=O,r.async=function(t,e,n,o,i){void 0===i&&(i=Promise);var a=new O(f(t,e,n,o),i);return r.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},_(j),h(j,l,"Generator"),h(j,u,function(){return this}),h(j,"toString",function(){return"[object Generator]"}),r.keys=function(t){var r=Object(t),e=[];for(var n in r)e.push(n);return e.reverse(),function t(){for(;e.length;){var n=e.pop();if(n in r)return t.value=n,t.done=!1,t}return t.done=!0,t}},r.values=T,F.prototype={constructor:F,reset:function(r){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(G),!r)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var e=this;function n(n,o){return c.type="throw",c.arg=r,e.next=n,o&&(e.method="next",e.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=i.call(a,"catchLoc"),s=i.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=r&&r<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=r,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),m},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),G(e),m}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;G(e)}return o}}throw Error("illegal catch attempt")},delegateYield:function(r,e,n){return this.delegate={iterator:T(r),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=t),m}},r}function i(t,r,e,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void e(t)}c.done?r(u):Promise.resolve(u).then(n,o)}function a(t){return function(){var r=this,e=arguments;return new Promise(function(n,o){var a=t.apply(r,e);function c(t){i(a,n,o,c,u,"next",t)}function u(t){i(a,n,o,c,u,"throw",t)}c(void 0)})}}var c=exports.searchSlug=function(){var n=a(o().mark(function n(i,a,c,u,s,l){var h,f,p,v,y,d,g;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(l.preventDefault(),(h=new FormData(l.target)).get(c)){n.next=6;break}return n.next=5,i.render();case 5:return n.abrupt("return");case 6:return f=h.get(c).toLowerCase().trim(),n.prev=7,(0,t.buttonSpinner)(a,"Search ".concat(s),"Searching..."),n.next=11,(0,r.postData)("/api/v1/getIds",{type:u,object:{slug:f},message:"No ".concat(s," found with that slug")});case 11:if(v=n.sent,y=null===(p=v.data)||void 0===p?void 0:p.doc[0],d=y._id){n.next=16;break}return(0,e.showAlert)("error","No ".concat(s," found with that slug")),n.abrupt("return");case 16:return i.currentPage=1,i.endpoint="/api/v1/".concat(u,"/").concat(d),n.next=20,i.render();case 20:i.endpoint="/api/v1/".concat(u),n.next=27;break;case 23:n.prev=23,n.t0=n.catch(7),console.log(n.t0),(0,e.showAlert)("error",(null===(g=n.t0.response)||void 0===g?void 0:g.data.message)||"An error occurred while searching for the ".concat(s,"."));case 27:return n.prev=27,(0,t.buttonSpinner)(a,"Search ".concat(s),"Searching..."),n.finish(27);case 30:case"end":return n.stop()}},n,null,[[7,23,27,30]])}));return function(t,r,e,o,i,a){return n.apply(this,arguments)}}();
},{"./spinner.js":"Zpwf","./http.js":"WyUo","./alerts.js":"VDCA"}],"D52Z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setupShowHandler=b,exports.setupSortHandler=v;var e=a(require("../utils/PaginatedAdminList.js")),t=require("../utils/alerts.js"),r=require("../utils/spinner.js"),n=require("../utils/http.js"),o=require("../utils/modalHandlers.js");function a(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(){i=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function d(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,r){return e[t]=r}}function p(e,t,r,n){var a=t&&t.prototype instanceof g?t:g,c=Object.create(a.prototype),i=new _(n||[]);return o(c,"_invoke",{value:B(e,r,i)}),c}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=p;var m="suspendedStart",h="suspendedYield",y="executing",v="completed",b={};function g(){}function w(){}function S(){}var q={};d(q,u,function(){return this});var x=Object.getPrototypeOf,j=x&&x(x(O([])));j&&j!==r&&n.call(j,u)&&(q=j);var L=S.prototype=g.prototype=Object.create(q);function E(e){["next","throw","return"].forEach(function(t){d(e,t,function(e){return this._invoke(t,e)})})}function F(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==c(d)&&n.call(d,"__await")?t.resolve(d.__await).then(function(e){r("next",e,i,u)},function(e){r("throw",e,i,u)}):t.resolve(d).then(function(e){s.value=e,i(s)},function(e){return r("throw",e,i,u)})}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t(function(t,o){r(e,n,t,o)})}return a=a?a.then(o,o):o()}})}function B(t,r,n){var o=m;return function(a,c){if(o===y)throw Error("Generator is already running");if(o===v){if("throw"===a)throw c;return{value:e,done:!0}}for(n.method=a,n.arg=c;;){var i=n.delegate;if(i){var u=k(i,n);if(u){if(u===b)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===m)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?v:h,l.arg===b)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var c=a.arg;return c?c.done?(r[t.resultName]=c.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function D(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(D,this),this.reset(!0)}function O(t){if(t||""===t){var r=t[u];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(c(t)+" is not iterable")}return w.prototype=S,o(L,"constructor",{value:S,configurable:!0}),o(S,"constructor",{value:w,configurable:!0}),w.displayName=d(S,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,S):(e.__proto__=S,d(e,s,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},E(F.prototype),d(F.prototype,l,function(){return this}),t.AsyncIterator=F,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var c=new F(p(e,r,n,o),a);return t.isGeneratorFunction(r)?c:c.next().then(function(e){return e.done?e.value:c.next()})},E(L),d(L,s,"Generator"),d(L,u,function(){return this}),d(L,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=O,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return i.type="throw",i.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var c=this.tryEntries[a],i=c.completion;if("root"===c.tryLoc)return o("end");if(c.tryLoc<=this.prev){var u=n.call(c,"catchLoc"),l=n.call(c,"finallyLoc");if(u&&l){if(this.prev<c.catchLoc)return o(c.catchLoc,!0);if(this.prev<c.finallyLoc)return o(c.finallyLoc)}else if(u){if(this.prev<c.catchLoc)return o(c.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return o(c.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=e,c.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:O(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function u(e,t,r,n,o,a,c){try{var i=e[a](c),u=i.value}catch(e){return void r(e)}i.done?t(u):Promise.resolve(u).then(n,o)}function l(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function c(e){u(a,n,o,c,i,"next",e)}function i(e){u(a,n,o,c,i,"throw",e)}c(void 0)})}}var s,d,p,f,m={adminSection:"#admin-dashboard-section",project:{section:"#admin-project-section",createButton:"#admin-project-create-button",tableBody:"#admin-project-table-body",pagination:"#admin-project-pagination",sort:"#sort-project",show:"#show-project",searchForm:"#admin-project-search-form",searchButton:"#admin-project-search-button",endpoint:"/api/v1/projects",type:"projects"},event:{section:"#admin-event-section",createButton:"#admin-event-create-button",tableBody:"#admin-event-table-body",pagination:"#admin-event-pagination",sort:"#sort-event",show:"#show-event",searchForm:"#admin-event-search-form",searchButton:"#admin-event-search-button",endpoint:"/api/v1/events",type:"events"},modal:{createModal:"#modalDashboard",createBtn:"#saveBtnDashboard",createForm:"#createDashboardForm",deleteModal:"#modalDeleteDashboard",deleteBtn:"#deleteBtnDashboard",deleteForm:"#deleteDashboardForm",title:"#title"}};function h(){if(!createDashboardForm.querySelector("#place")){var e=document.createElement("div");e.className="mb-3",e.id="place-field",e.innerHTML='\n      <label for="place" class="form-label">Place</label>\n      <input type="text" class="form-control" id="place" name="place" required />\n    ',createDashboardForm.querySelector(".modal-body").insertBefore(e,createDashboardForm.querySelector(".modal-body").children[2])}if(!createDashboardForm.querySelector("#time")){var t=document.createElement("div");t.className="mb-3",t.id="time-field",t.innerHTML='\n      <label for="time" class="form-label">Time</label>\n      <input type="time" class="form-control" id="time" name="time" required />\n    ',createDashboardForm.querySelector(".modal-body").insertBefore(t,createDashboardForm.querySelector(".modal-body").children[3])}}function y(){var e=createDashboardForm.querySelector("#place-field"),t=createDashboardForm.querySelector("#time-field");e&&e.remove(),t&&t.remove()}function v(e,t){e.addEventListener("change",function(e){t.sort=e.target.value,t.currentPage=1,t.render()})}function b(e,t){e.addEventListener("change",function(e){t.itemsPerPage=e.target.value,t.currentPage=1,t.render()})}function g(e){document.querySelector(e).addEventListener("click",function(e){var t=e.target.closest("button");if(t){var r=t.dataset,n=r.id,o=r.title,a=r.type;document.querySelector(m.modal.deleteForm).dataset.id=n,document.querySelector(m.modal.deleteForm).dataset.type=a,document.querySelector(m.modal.title).textContent=o}})}function w(e){document.querySelector(e).addEventListener("click",function(){var t=document.querySelector(e).dataset.type;document.querySelector(m.modal.createForm).dataset.type=t,"events"===t?h():y()})}document.querySelector(m.modal.deleteModal)&&(p=new bootstrap.Modal(document.querySelector(m.modal.deleteModal))),document.querySelector(m.modal.createModal)&&(f=new bootstrap.Modal(document.querySelector(m.modal.createModal))),(document.querySelector(m.project.section)||document.querySelector(m.event.section))&&(s&&d||(s=new e.default({container:document.querySelector(m.project.tableBody),paginationContainer:document.querySelector(m.project.pagination),endpoint:m.project.endpoint,type:m.project.type,itemsPerPage:5}),d=new e.default({container:document.querySelector(m.event.tableBody),paginationContainer:document.querySelector(m.event.pagination),endpoint:m.event.endpoint,type:m.event.type,itemsPerPage:5}),g(m.project.tableBody),g(m.event.tableBody),document.querySelector(m.modal.deleteForm).addEventListener("submit",function(){var e=l(i().mark(function e(n){var o,a,c,u;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),o=document.querySelector(m.modal.deleteForm).dataset,a=o.id,c=o.type,e.prev=2,(0,r.buttonSpinner)(document.querySelector(m.modal.deleteBtn),"Confirm","Deleting"),e.next=6,axios.delete("/api/v1/".concat(c,"/").concat(a));case 6:if(204!==e.sent.status){e.next=17;break}if((0,t.showAlert)("success","".concat(c.charAt(0).toUpperCase()+c.slice(1)," deleted successfully!")),"projects"!==c){e.next=14;break}return e.next=12,s.render();case 12:e.next=17;break;case 14:if("events"!==c){e.next=17;break}return e.next=17,d.render();case 17:p.hide(),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(2),(0,t.showAlert)("error",(null===(u=e.t0.response)||void 0===u||null===(u=u.data)||void 0===u?void 0:u.message)||"Deletion failed.");case 23:return e.prev=23,(0,r.buttonSpinner)(document.querySelector(m.modal.deleteBtn),"Confirm","Deleting"),e.finish(23);case 26:case"end":return e.stop()}},e,null,[[2,20,23,26]])}));return function(t){return e.apply(this,arguments)}}()),v(document.querySelector(m.event.sort),d),v(document.querySelector(m.project.sort),s),b(document.querySelector(m.project.show),s),b(document.querySelector(m.event.show),d),document.querySelector(m.project.searchForm).addEventListener("submit",function(e){return(0,o.searchSlug)(s,document.querySelector(m.project.searchButton),"admin-search-project",m.project.type,"Project",e)}),document.querySelector(m.event.searchForm).addEventListener("submit",function(e){return(0,o.searchSlug)(d,document.querySelector(m.event.searchButton),"admin-search-event",m.event.type,"Event",e)}),w(m.project.createButton),w(m.event.createButton)),document.querySelector(m.modal.createForm).addEventListener("submit",function(){var e=l(i().mark(function e(o){var a,c,u,l;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o.preventDefault(),a=document.querySelector(m.modal.createForm).dataset.type,c=new FormData(o.target),u="projects"===a?"/api/v1/projects":"/api/v1/events",e.prev=4,(0,r.buttonSpinner)(document.querySelector(m.modal.createBtn),"Create","Creating"),e.next=8,(0,n.postData)(u,c);case 8:if("success"!==e.sent.status){e.next=20;break}if((0,t.showAlert)("success","".concat(a.charAt(0).toUpperCase()+a.slice(1)," created successfully!")),f.hide(),"projects"!==a){e.next=17;break}return e.next=15,s.render();case 15:e.next=20;break;case 17:if("events"!==a){e.next=20;break}return e.next=20,d.render();case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(4),(0,t.showAlert)("error",(null===(l=e.t0.response)||void 0===l||null===(l=l.data)||void 0===l?void 0:l.message)||"Creation failed.");case 25:return e.prev=25,(0,r.buttonSpinner)(document.querySelector(m.modal.createBtn),"Create","Creating"),e.finish(25);case 28:case"end":return e.stop()}},e,null,[[4,22,25,28]])}));return function(t){return e.apply(this,arguments)}}()),document.querySelector(m.modal.createModal).addEventListener("hidden.bs.modal",function(){document.querySelector(m.modal.createForm).reset(),delete document.querySelector(m.modal.createForm).dataset.type}),s.render(),d.render());
},{"../utils/PaginatedAdminList.js":"tFEn","../utils/alerts.js":"VDCA","../utils/spinner.js":"Zpwf","../utils/http.js":"WyUo","../utils/modalHandlers.js":"QCyM"}],"xJwD":[function(require,module,exports) {
"use strict";var t=require("../utils/alerts.js"),e=require("../utils/spinner.js");function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(){n=function(){return e};var t,e={},o=Object.prototype,a=o.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},c="function"==typeof Symbol?Symbol:{},u=c.iterator||"@@iterator",l=c.asyncIterator||"@@asyncIterator",s=c.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function p(t,e,r,n){var o=e&&e.prototype instanceof w?e:w,a=Object.create(o.prototype),c=new F(n||[]);return i(a,"_invoke",{value:O(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=p;var d="suspendedStart",v="suspendedYield",y="executing",m="completed",g={};function w(){}function b(){}function E(){}var x={};f(x,u,function(){return this});var L=Object.getPrototypeOf,j=L&&L(L(G([])));j&&j!==o&&a.call(j,u)&&(x=j);var P=E.prototype=w.prototype=Object.create(x);function S(t){["next","throw","return"].forEach(function(e){f(t,e,function(t){return this._invoke(e,t)})})}function _(t,e){function n(o,i,c,u){var l=h(t[o],t,i);if("throw"!==l.type){var s=l.arg,f=s.value;return f&&"object"==r(f)&&a.call(f,"__await")?e.resolve(f.__await).then(function(t){n("next",t,c,u)},function(t){n("throw",t,c,u)}):e.resolve(f).then(function(t){s.value=t,c(s)},function(t){return n("throw",t,c,u)})}u(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function a(){return new e(function(e,o){n(t,r,e,o)})}return o=o?o.then(a,a):a()}})}function O(e,r,n){var o=d;return function(a,i){if(o===y)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=T(c,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=h(e,r,n);if("normal"===l.type){if(o=n.done?m:v,l.arg===g)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=m,n.method="throw",n.arg=l.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function F(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function G(e){if(e||""===e){var n=e[u];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(a.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(r(e)+" is not iterable")}return b.prototype=E,i(P,"constructor",{value:E,configurable:!0}),i(E,"constructor",{value:b,configurable:!0}),b.displayName=f(E,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,E):(t.__proto__=E,f(t,s,"GeneratorFunction")),t.prototype=Object.create(P),t},e.awrap=function(t){return{__await:t}},S(_.prototype),f(_.prototype,l,function(){return this}),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new _(p(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then(function(t){return t.done?t.value:i.next()})},S(P),f(P,s,"Generator"),f(P,u,function(){return this}),f(P,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=G,F.prototype={constructor:F,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=a.call(i,"catchLoc"),l=a.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:G(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function o(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function a(t){return function(){var e=this,r=arguments;return new Promise(function(n,a){var i=t.apply(e,r);function c(t){o(i,n,a,c,u,"next",t)}function u(t){o(i,n,a,c,u,"throw",t)}c(void 0)})}}var i=document.querySelector("#editProjEve"),c=document.querySelector("#formEditProjEve"),u=document.getElementById("featured"),l=document.getElementById("editProjEveButton");if(i){var s=i.dataset.type;if("events"===s){var f=i.dataset.place,p=i.dataset.time,h=new Date("1970-01-01T".concat(p)),d=h.toTimeString().slice(0,5),v='\n      <div>\n           <label for="place" class="form-label" >Place</label>\n           <input type="text" class="form-control" id="place" name="place" value="'.concat(f,'" required />\n       </div>\n       <div>\n           <label for="time" class="form-label">Time</label>\n           <input type="time" class="form-control" id="time" name="time" value="').concat(d,'" required />\n       </div>\n    ');c.insertAdjacentHTML("afterbegin",v)}c.addEventListener("submit",function(){var r=a(n().mark(function r(o){var a,c,f,p,h,d,v,y,m,g;return n().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return o.preventDefault(),a=new FormData(o.target),c="",f=a.get("imageCover"),p=f&&f.size>0?f:null,h=a.getAll("images"),d=h.length&&h[0].size>0?h:null,v=new FormData,y=a.get("date"),v.append("name",a.get("title")),v.append("richDescription",a.get("summary")),v.append("description",a.get("description")),v.append("isFeatured",u.checked),p&&v.append("imageCover",p),d&&d.forEach(function(t){return v.append("images",t)}),i.dataset.slug,"events"===s&&(y="".concat(a.get("date"),"T").concat(a.get("time")),v.append("place",a.get("place")),c="/api/v1/events/".concat(i.dataset.id)),"projects"===s&&(c="/api/v1/projects/".concat(i.dataset.id)),v.append("date",y),r.prev=19,(0,e.buttonSpinner)(l,"Update","Updating"),r.next=23,axios({method:"PATCH",url:c,headers:{"Content-Type":"multipart/form-data"},data:v});case 23:"success"===(m=r.sent).data.status&&(0,t.showAlert)(m.data.message,"Updated successfully."),setTimeout(function(){var t;window.location.href="/".concat(s,"/").concat(null!==(t=m.data.data.updatedProject)&&void 0!==t&&t.slug?m.data.data.updatedProject.slug:m.data.data.updatedEvent.slug)},2e3),r.next=32;break;case 28:r.prev=28,r.t0=r.catch(19),console.error(r.t0),(0,t.showAlert)("error",(null===(g=r.t0.response)||void 0===g||null===(g=g.data)||void 0===g?void 0:g.message)||"An error occurred while updating.");case 32:return r.prev=32,(0,e.buttonSpinner)(l,"Update","Updating"),r.finish(32);case 35:case"end":return r.stop()}},r,null,[[19,28,32,35]])}));return function(t){return r.apply(this,arguments)}}())}
},{"../utils/alerts.js":"VDCA","../utils/spinner.js":"Zpwf"}],"SCzO":[function(require,module,exports) {
"use strict";var e=require("../utils/PaginatedAdminList.js"),t=require("./admin_dashboard.js"),r=require("../utils/alerts.js"),n=require("../utils/spinner.js"),o=require("../utils/http.js");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(){s=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},l=i.iterator||"@@iterator",d=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function m(e,t,r,n){var a=t&&t.prototype instanceof g?t:g,s=Object.create(a.prototype),i=new j(n||[]);return o(s,"_invoke",{value:D(e,r,i)}),s}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=m;var p="suspendedStart",h="suspendedYield",v="executing",y="completed",b={};function g(){}function w(){}function S(){}var x={};u(x,l,function(){return this});var L=Object.getPrototypeOf,k=L&&L(L(_([])));k&&k!==r&&n.call(k,l)&&(x=k);var E=S.prototype=g.prototype=Object.create(x);function q(e){["next","throw","return"].forEach(function(t){u(e,t,function(e){return this._invoke(t,e)})})}function F(e,t){function r(o,s,i,l){var d=f(e[o],e,s);if("throw"!==d.type){var c=d.arg,u=c.value;return u&&"object"==a(u)&&n.call(u,"__await")?t.resolve(u.__await).then(function(e){r("next",e,i,l)},function(e){r("throw",e,i,l)}):t.resolve(u).then(function(e){c.value=e,i(c)},function(e){return r("throw",e,i,l)})}l(d.arg)}var s;o(this,"_invoke",{value:function(e,n){function o(){return new t(function(t,o){r(e,n,t,o)})}return s=s?s.then(o,o):o()}})}function D(t,r,n){var o=p;return function(a,s){if(o===v)throw Error("Generator is already running");if(o===y){if("throw"===a)throw s;return{value:e,done:!0}}for(n.method=a,n.arg=s;;){var i=n.delegate;if(i){var l=A(i,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=v;var d=f(t,r,n);if("normal"===d.type){if(o=n.done?y:h,d.arg===b)continue;return{value:d.arg,done:n.done}}"throw"===d.type&&(o=y,n.method="throw",n.arg=d.arg)}}}function A(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var s=a.arg;return s?s.done?(r[t.resultName]=s.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function B(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(B,this),this.reset(!0)}function _(t){if(t||""===t){var r=t[l];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,s=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return s.next=s}}throw new TypeError(a(t)+" is not iterable")}return w.prototype=S,o(E,"constructor",{value:S,configurable:!0}),o(S,"constructor",{value:w,configurable:!0}),w.displayName=u(S,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,S):(e.__proto__=S,u(e,c,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},q(F.prototype),u(F.prototype,d,function(){return this}),t.AsyncIterator=F,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var s=new F(m(e,r,n,o),a);return t.isGeneratorFunction(r)?s:s.next().then(function(e){return e.done?e.value:s.next()})},q(E),u(E,c,"Generator"),u(E,l,function(){return this}),u(E,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=_,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return i.type="throw",i.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var s=this.tryEntries[a],i=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var l=n.call(s,"catchLoc"),d=n.call(s,"finallyLoc");if(l&&d){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!d)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=e,s.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:_(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function i(e,t,r,n,o,a,s){try{var i=e[a](s),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,o)}function l(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function s(e){i(a,n,o,s,l,"next",e)}function l(e){i(a,n,o,s,l,"throw",e)}s(void 0)})}}var d,c,u,m={address:{section:document.querySelector("#admin-address-section"),createButton:document.querySelector("#admin-create-address-button"),tableBody:document.querySelector("#admin-address-table-body"),pagination:document.querySelector("#admin-address-pagination"),sort:document.querySelector("#sort-address"),show:document.querySelector("#show-address"),searchForm:document.querySelector("#search-address-form"),searchButton:document.querySelector("#search-address-button"),endpoint:"/api/v1/housings",type:"addresses"},modal:{modalBody:document.querySelector("#addressModal"),modalLabel:document.querySelector("#addressModalLabel"),modalForm:document.querySelector("#addressForm"),modalFormBody:document.querySelector(".modal-body"),modalFormSaveButton:document.querySelector("#address-modal-save-btn"),modalFormCloseButton:document.querySelector("#address-modal-close-btn"),modalDelete:document.querySelector("#delete"),modalDeleteButtonDelete:document.querySelector("#delete-btn")},modalForm:{phase:document.querySelector("#phase"),block:document.querySelector("#block"),lot:document.querySelector("#lot"),street:document.querySelector("#street"),status:document.querySelector("#status"),completeAddress:document.querySelector("#complete-address")}};function f(e){return'\n              <div class="modal-body">\n                <div class="mb-3">\n                  <label for="phase" class="form-label fw-semibold">Phase</label>\n                  <input type="number" class="form-control" id="phase" name="phase" value='.concat((null==e?void 0:e.phase)||"",'>\n                </div>\n                <div class="mb-3">\n                  <label for="block" class="form-label fw-semibold">Block</label>\n                  <input type="text" class="form-control" id="block" name="block" value=').concat((null==e?void 0:e.block)||"",'>\n                </div>\n                <div class="mb-3">\n                  <label for="lot" class="form-label fw-semibold">Lot</label>\n                  <input type="number" class="form-control" id="lot" name="lot" value=').concat((null==e?void 0:e.lot)||"",'>\n                </div>\n                <div class="mb-3">\n                  <label for="street" class="form-label fw-semibold">Street</label>\n                  <input type="text" class="form-control" id="street" name="street" value=').concat((null==e?void 0:e.street)||"",'>\n                </div>\n                <div id="dayContainer" class="mb-3">\n                    <label for="status" class="form-label fw-semibold">Status</label>\n                    <select class="form-select" id="status" name="status">\n                      <option value="">Select Type</option>\n                      <option value="unoccupied">Unoccupied</option>\n                      <option value="occupied">Occupied</option>\n                      <option value="maintenance">Maintenance</option>\n                    </select>\n                </div>\n            </div>\n            <div class="modal-footer">\n              <button id="address-modal-close-btn" type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>\n              <button id="address-modal-save-btn" type="submit" class="btn bg-green-700 text-slate-100">Submit</button>\n            </div>\n          ')}m.modal.modalBody&&(c=new bootstrap.Modal(m.modal.modalBody)),m.modal.modalDelete&&(u=new bootstrap.Modal(m.modal.modalDelete)),m.address.section&&(d||(d=new e.PaginatedAdminAddressList({container:m.address.tableBody,paginationContainer:m.address.pagination,endpoint:m.address.endpoint,type:m.address.type,itemsPerPage:5}),(0,t.setupSortHandler)(m.address.sort,d),(0,t.setupShowHandler)(m.address.show,d),m.address.searchForm.addEventListener("submit",function(){var e=l(s().mark(function e(t){var o,a,i;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),o=new FormData(t.target),a=o.get("admin-search-event").trim()){e.next=7;break}return d.endpoint="/api/v1/housings",d.render(),e.abrupt("return");case 7:return e.prev=7,d.currentPage=1,d.endpoint="/api/v1/housings?search=".concat(a),(0,n.buttonSpinner)(m.address.searchButton,"Search Address","Searching"),e.next=13,d.render();case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(7),(0,r.showAlert)("error",(null===(i=e.t0.response)||void 0===i||null===(i=i.data)||void 0===i?void 0:i.message)||"Failed to search address. Please try again later.");case 18:return e.prev=18,(0,n.buttonSpinner)(m.address.searchButton,"Search Address","Searching"),e.finish(18);case 21:case"end":return e.stop()}},e,null,[[7,15,18,21]])}));return function(t){return e.apply(this,arguments)}}()),m.address.createButton.addEventListener("click",function(){m.modal.modalLabel.textContent="Create New Address",m.modal.modalForm.innerHTML=f()}),m.address.tableBody.addEventListener("click",function(){var e=l(s().mark(function e(t){var a,i,l,d,c,u,p;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(d=null===(a=t.target.closest("td"))||void 0===a?void 0:a.dataset.id){e.next=3;break}return e.abrupt("return");case 3:if("edit-btn"!==(null===(i=t.target.closest("button"))||void 0===i?void 0:i.getAttribute("id"))){e.next=17;break}return e.prev=4,m.modal.modalLabel.textContent="Edit Address",(0,n.spinner)(m.modal.modalForm,"Loading address details"),e.next=9,(0,o.fetchData)("".concat(m.address.endpoint,"/").concat(d));case 9:c=e.sent,u=c.data.doc,"success"===c.status&&(m.modal.modalForm.innerHTML="",m.modal.modalForm.dataset.selectedId=d,m.modal.modalForm.innerHTML=f(u)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),(0,r.showAlert)("error","Failed to load address details. Please try again later.");case 17:"delete-btn"===(null===(l=t.target.closest("button"))||void 0===l?void 0:l.getAttribute("id"))&&(m.modal.modalDelete.dataset.selectedId=d,m.modalForm.completeAddress.textContent=null===(p=t.target.closest("td"))||void 0===p?void 0:p.dataset.address);case 18:case"end":return e.stop()}},e,null,[[4,14]])}));return function(t){return e.apply(this,arguments)}}()),m.modal.modalForm.addEventListener("submit",function(){var e=l(s().mark(function e(t){var a,i,l,u,f,p,h;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=m.modal.modalLabel.textContent,i=m.modal.modalForm.dataset.selectedId,l="Create New Address"===a?"/api/v1/housings":"/api/v1/housings/".concat(i),u="Create New Address"===a?"post":"patch",f=new FormData(t.target),p={phase:f.get("phase"),block:f.get("block"),lot:f.get("lot"),street:f.get("street"),status:f.get("status").toLowerCase()},e.prev=7,(0,n.buttonSpinner)(document.querySelector("#address-modal-save-btn"),"Submit","Submitting"),e.next=11,"post"===u?(0,o.postData)(l,p):(0,o.patchData)(l,p);case 11:if("success"!==e.sent.status){e.next=17;break}return(0,r.showAlert)("success","".concat(a," successfully!")),c.hide(),e.next=17,d.render();case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(7),(0,r.showAlert)("error",(null===(h=e.t0.response)||void 0===h||null===(h=h.data)||void 0===h?void 0:h.message)||"Failed to submit the form. Please try again later.");case 22:return e.prev=22,document.querySelector("#address-modal-save-btn")&&(0,n.buttonSpinner)(document.querySelector("#address-modal-save-btn"),"Submit","Submitting"),e.finish(22);case 25:case"end":return e.stop()}},e,null,[[7,19,22,25]])}));return function(t){return e.apply(this,arguments)}}()),m.modal.modalBody.addEventListener("hidden.bs.modal",function(){m.modal.modalForm.innerHTML="",delete m.modal.modalForm.dataset.selectedId}),m.modal.modalDelete.addEventListener("hidden.bs.modal",function(){delete m.modal.modalDelete.dataset.selectedId}),m.modal.modalDeleteButtonDelete.addEventListener("click",l(s().mark(function e(){var t,a;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.modal.modalDelete.dataset.selectedId,e.prev=1,(0,n.buttonSpinner)(m.modal.modalDeleteButtonDelete,"Confirm","Deleting"),e.next=5,(0,o.deleteData)("".concat(m.address.endpoint,"/").concat(t));case 5:return(0,r.showAlert)("success","Address deleted successfully!"),u.hide(),e.next=9,d.render();case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),(0,r.showAlert)("error",(null===(a=e.t0.response)||void 0===a||null===(a=a.data)||void 0===a?void 0:a.message)||"Failed to delete address. Please try again later.");case 14:return e.prev=14,(0,n.buttonSpinner)(m.modal.modalDeleteButtonDelete,"Confirm","Deleting"),e.finish(14);case 17:case"end":return e.stop()}},e,null,[[1,11,14,17]])})))),d.render());
},{"../utils/PaginatedAdminList.js":"tFEn","./admin_dashboard.js":"D52Z","../utils/alerts.js":"VDCA","../utils/spinner.js":"Zpwf","../utils/http.js":"WyUo"}],"yxtE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.currentYear=void 0,exports.loadPaymentStatement=E,exports.updateYearOptions=q,exports.yearSelect=void 0;var t=require("../utils/spinner.js"),e=require("../utils/http.js"),r=require("../utils/alerts.js");function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(){o=function(){return e};var t,e={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},s="function"==typeof Symbol?Symbol:{},c=s.iterator||"@@iterator",u=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function d(t,e,r,n){var o=e&&e.prototype instanceof w?e:w,a=Object.create(o.prototype),s=new _(n||[]);return i(a,"_invoke",{value:P(t,r,s)}),a}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=d;var h="suspendedStart",m="suspendedYield",y="executing",v="completed",g={};function w(){}function b(){}function x(){}var S={};f(S,c,function(){return this});var L=Object.getPrototypeOf,E=L&&L(L(O([])));E&&E!==r&&a.call(E,c)&&(S=E);var k=x.prototype=w.prototype=Object.create(S);function q(t){["next","throw","return"].forEach(function(e){f(t,e,function(t){return this._invoke(e,t)})})}function A(t,e){function r(o,i,s,c){var u=p(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?e.resolve(f.__await).then(function(t){r("next",t,s,c)},function(t){r("throw",t,s,c)}):e.resolve(f).then(function(t){l.value=t,s(l)},function(t){return r("throw",t,s,c)})}c(u.arg)}var o;i(this,"_invoke",{value:function(t,n){function a(){return new e(function(e,o){r(t,n,e,o)})}return o=o?o.then(a,a):a()}})}function P(e,r,n){var o=h;return function(a,i){if(o===y)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var c=D(s,n);if(c){if(c===g)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=p(e,r,n);if("normal"===u.type){if(o=n.done?v:m,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function D(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,D(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=p(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function O(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(a.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(n(e)+" is not iterable")}return b.prototype=x,i(k,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,f(t,l,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},q(A.prototype),f(A.prototype,u,function(){return this}),e.AsyncIterator=A,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new A(d(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then(function(t){return t.done?t.value:i.next()})},q(k),f(k,l,"Generator"),f(k,c,function(){return this}),f(k,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=O,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:O(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function a(t,e,r,n,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function i(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function s(t){a(i,n,o,s,c,"next",t)}function c(t){a(i,n,o,s,c,"throw",t)}s(void 0)})}}var s=document.querySelector("#change-password-form"),c=document.querySelector("#change-password-form-button"),u=document.querySelector("#change-details-form"),l=document.querySelector("#change-details-form-button"),f=document.querySelector("#security-question"),d=document.querySelector("#custom-question-container"),p=document.querySelector("#custom-question"),h=document.querySelector("#security-question-form"),m=document.querySelector("#security-question-button"),y=document.querySelector("#verify-step"),v=document.querySelector("#current-security-answer"),g=document.querySelector("#verify-security-button"),w=document.querySelector("#update-step"),b="",x=exports.yearSelect=document.getElementById("year-select"),S=exports.currentYear=(new Date).getFullYear(),L=document.querySelector("#me-container");function E(t,e){return k.apply(this,arguments)}function k(){return(k=i(o().mark(function t(r,n){var a,i,s,c,u,l,f,d;return o().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=document.getElementById("payment-statement-body"),i=document.getElementById("total-due"),s=document.getElementById("total-paid"),c=document.getElementById("total-remaining"),u=document.getElementById("months-paid"),t.prev=5,a.innerHTML='\n                <tr>\n                    <td colspan="6" class="text-center text-muted">\n                        <div class="spinner-border spinner-border-sm me-2"></div>\n                        Loading payment statement...\n                    </td>\n                </tr>\n            ',t.next=9,(0,e.fetchData)(n||"/api/v1/payments/statement/".concat(r));case 9:if("success"!==(l=t.sent).status){t.next=22;break}f=l.data.statement,d=f.summary,i.textContent="₱".concat(d.totalDue),s.textContent="₱".concat(d.totalPaid),c.textContent="₱".concat(d.totalRemaining),u.textContent="".concat(d.monthsFullyPaid,"/12"),a.innerHTML="",f.monthlyBreakdown.forEach(function(t){var e=document.createElement("tr"),r="";r="paid"===t.status?'<span class="badge bg-success">Paid</span>':"partial"===t.status?'<span class="badge bg-warning">Partial</span>':'<span class="badge bg-danger">Unpaid</span>';var n="-";t.paymentDate&&(n=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"2-digit",timeZone:"Asia/Manila"}).format(new Date(t.paymentDate))),e.innerHTML="\n                        <td>".concat(t.month,"</td>\n                        <td>").concat(r,"</td>\n                        <td>₱").concat(t.amountDue,"</td>\n                        <td>₱").concat(t.amountPaid,"</td>\n                        <td>₱").concat(t.remainingBalance,"</td>\n                        <td>").concat(n,"</td>\n                    "),a.appendChild(e)}),l.data.availableYears&&q(l.data.availableYears),t.next=23;break;case 22:throw new Error("Failed to load payment statement");case 23:t.next=33;break;case 25:t.prev=25,t.t0=t.catch(5),console.error("Error loading payment statement:",t.t0),a.innerHTML='\n                <tr>\n                    <td colspan="6" class="text-center text-danger">\n                        <i class="bi bi-exclamation-triangle me-2"></i>\n                        Error loading payment statement. Please try again.\n                    </td>\n                </tr>\n            ',i.textContent="₱0",s.textContent="₱0",c.textContent="₱0",u.textContent="0/12";case 33:case"end":return t.stop()}},t,null,[[5,25]])}))).apply(this,arguments)}function q(t){var e=x.value;x.innerHTML="",t.forEach(function(t){var r=document.createElement("option");r.value=t,r.textContent=t,t.toString()===e&&(r.selected=!0),x.appendChild(r)})}L&&(x.value=S,E(S),x.addEventListener("change",function(){E(parseInt(this.value))})),s&&s.addEventListener("submit",function(){var n=i(o().mark(function n(a){var i,u;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a.preventDefault(),i=new FormData(a.target),u={currentPassword:i.get("currentPassword"),password:i.get("password"),confirmPassword:i.get("confirmPassword")},n.prev=3,(0,t.buttonSpinner)(c,"Confirm","Loading"),n.next=7,(0,e.patchData)("/api/v1/users/me/changePassword",u);case 7:"success"===n.sent.status&&((0,r.showAlert)("success","Password changed successfully!"),s.reset()),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(3),(0,r.showAlert)("error",n.t0.response.data.message||"An error occurred while changing the password.");case 14:return n.prev=14,(0,t.buttonSpinner)(c,"Confirm","Loading"),n.finish(14);case 17:case"end":return n.stop()}},n,null,[[3,11,14,17]])}));return function(t){return n.apply(this,arguments)}}()),u&&u.addEventListener("submit",function(){var n=i(o().mark(function n(a){var i,s;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a.preventDefault(),i=new FormData(a.target),s={name:"".concat(i.get("first-name")," ").concat(i.get("middle-initial")," ").concat(i.get("last-name")).trim(),email:i.get("email")||"",contactNumber:i.get("number")||""},n.prev=3,(0,t.buttonSpinner)(l,"Confirm","Loading"),n.next=7,(0,e.patchData)("/api/v1/users/me/changeDetails",s);case 7:"success"===n.sent.status&&((0,r.showAlert)("success","Details changed successfully!"),u.reset(),setTimeout(function(){window.location.reload()},2e3)),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(3),(0,r.showAlert)("error",n.t0.response.data.message||"An error occurred while changing the details.");case 14:return n.prev=14,(0,t.buttonSpinner)(l,"Confirm","Loading"),n.finish(14);case 17:case"end":return n.stop()}},n,null,[[3,11,14,17]])}));return function(t){return n.apply(this,arguments)}}()),f&&f.addEventListener("change",function(){"Custom Question"===this.value?(d.style.display="block",p.required=!0):(d.style.display="none",p.required=!1,p.value="")}),h&&h.addEventListener("submit",function(){var n=i(o().mark(function n(a){var i,s,c,u,l,f,d,p;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(a.preventDefault(),i=new FormData(h),s=i.get("securityQuestion"),c=i.get("customQuestion"),u=i.get("securityAnswer"),l=i.get("confirmSecurityAnswer"),"Custom Question"!==s){n.next=11;break}if(c&&!(c.trim().length<10)){n.next=10;break}return(0,r.showAlert)("error","Custom question must be at least 10 characters long"),n.abrupt("return");case 10:s=c.trim();case 11:if(s&&u&&l){n.next=14;break}return(0,r.showAlert)("error","Please fill in all fields"),n.abrupt("return");case 14:if(u===l){n.next=17;break}return(0,r.showAlert)("error","Secret answers do not match"),n.abrupt("return");case 17:if(!(u.length<3)){n.next=20;break}return(0,r.showAlert)("error","Secret answer must be at least 3 characters long"),n.abrupt("return");case 20:return f=m.textContent,n.prev=21,(0,t.buttonSpinner)(m,f,"Setting up"),d={secretQuestion:s,secretAnswer:u,currentAnswer:b},n.next=26,(0,e.patchData)("/api/v1/users/me/securityAnswer",d);case 26:"success"===n.sent.status&&((0,r.showAlert)("success","Secret Question updated successfully!"),setTimeout(function(){location.reload()},1500)),n.next=33;break;case 30:n.prev=30,n.t0=n.catch(21),(0,r.showAlert)("error",(null===(p=n.t0.response)||void 0===p||null===(p=p.data)||void 0===p?void 0:p.message)||"Failed to update secret question");case 33:return n.prev=33,(0,t.buttonSpinner)(m,f,"Setting up"),b="",n.finish(33);case 37:case"end":return n.stop()}},n,null,[[21,30,33,37]])}));return function(t){return n.apply(this,arguments)}}()),y&&g.addEventListener("click",i(o().mark(function n(){var a,i;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(a=v.value.trim()){n.next=3;break}return n.abrupt("return");case 3:return console.log("Security Answer: ".concat(a)),n.prev=4,(0,t.buttonSpinner)(g,"Verify","Verifying"),n.next=8,(0,e.postData)("/api/v1/users/me/verifySecretAnswer",{secretAnswer:a});case 8:"success"===n.sent.status&&((0,r.showAlert)("success","Secret answer verified successfully!"),w.classList.remove("d-none"),w.classList.add("d-flex"),b=a),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(4),(0,r.showAlert)("error",(null===(i=n.t0.response)||void 0===i||null===(i=i.data)||void 0===i?void 0:i.message)||"Failed to update secret question");case 15:return n.prev=15,(0,t.buttonSpinner)(g,"Verify","Verifying"),n.finish(15);case 18:case"end":return n.stop()}},n,null,[[4,12,15,18]])})));
},{"../utils/spinner.js":"Zpwf","../utils/http.js":"WyUo","../utils/alerts.js":"VDCA"}],"iwVb":[function(require,module,exports) {
"use strict";var t=require("../utils/PaginatedAdminList.js"),e=require("../utils/spinner.js"),r=require("../utils/alerts.js"),n=require("./admin_dashboard.js"),a=require("../utils/http.js"),o=require("../Me/me.js");function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(){u=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function h(t,e,r,n){var o=e&&e.prototype instanceof w?e:w,i=Object.create(o.prototype),u=new O(n||[]);return a(i,"_invoke",{value:j(t,r,u)}),i}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var d="suspendedStart",m="suspendedYield",v="executing",y="completed",g={};function w(){}function b(){}function S(){}var x={};f(x,c,function(){return this});var L=Object.getPrototypeOf,E=L&&L(L(F([])));E&&E!==r&&n.call(E,c)&&(x=E);var D=S.prototype=w.prototype=Object.create(x);function q(t){["next","throw","return"].forEach(function(e){f(t,e,function(t){return this._invoke(e,t)})})}function k(t,e){function r(a,o,u,c){var s=p(t[a],t,o);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==i(f)&&n.call(f,"__await")?e.resolve(f.__await).then(function(t){r("next",t,u,c)},function(t){r("throw",t,u,c)}):e.resolve(f).then(function(t){l.value=t,u(l)},function(t){return r("throw",t,u,c)})}c(s.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e(function(e,a){r(t,n,e,a)})}return o=o?o.then(a,a):a()}})}function j(e,r,n){var a=d;return function(o,i){if(a===v)throw Error("Generator is already running");if(a===y){if("throw"===o)throw i;return{value:t,done:!0}}for(n.method=o,n.arg=i;;){var u=n.delegate;if(u){var c=P(u,n);if(c){if(c===g)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===d)throw a=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=v;var s=p(e,r,n);if("normal"===s.type){if(a=n.done?y:m,s.arg===g)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a=y,n.method="throw",n.arg=s.arg)}}}function P(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var o=p(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,g;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function F(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(i(e)+" is not iterable")}return b.prototype=S,a(D,"constructor",{value:S,configurable:!0}),a(S,"constructor",{value:b,configurable:!0}),b.displayName=f(S,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,S):(t.__proto__=S,f(t,l,"GeneratorFunction")),t.prototype=Object.create(D),t},e.awrap=function(t){return{__await:t}},q(k.prototype),f(k.prototype,s,function(){return this}),e.AsyncIterator=k,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new k(h(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then(function(t){return t.done?t.value:i.next()})},q(D),f(D,l,"Generator"),f(D,c,function(){return this}),f(D,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=F,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return u.type="throw",u.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],u=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;A(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:F(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function c(t,e,r,n,a,o,i){try{var u=t[o](i),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,a)}function s(t){return function(){var e=this,r=arguments;return new Promise(function(n,a){var o=t.apply(e,r);function i(t){c(o,n,a,i,u,"next",t)}function u(t){c(o,n,a,i,u,"throw",t)}i(void 0)})}}var l=document.querySelector("#manual-payment-section"),f=document.querySelector("#manual-payment-details"),h=document.querySelector("#manual-payment-pagination"),p=document.querySelector("#search-user-form"),d=document.querySelector("#search-user-input"),m=document.querySelector("#search-user-button"),v=document.querySelector("#manual-payment-form"),y=document.querySelector("#manual-payment-form-button"),g=document.querySelector("#from-manual-payment"),w=document.querySelector("#to-manual-payment"),b=document.querySelector("#checkbox-manual-payment"),S=document.querySelector("#manual-payment-amount"),x=document.querySelector("#show-payment"),L=document.querySelector("#manual-payment-table-body"),E=document.querySelector("#filter-date-form"),D=document.querySelector("#filter-date-form-button"),q=null,k="",j=document.querySelector("#statement-admin-manual");function P(t){return t.checked}function _(t,e){var r,n;if(t instanceof Date&&e instanceof Date?(r=t,n=e):(r=new Date(t),n=new Date(e)),r>=n)return{isValid:!1,months:0};if(1!==r.getDate())return{isValid:!1,months:0};var a=new Date(n.getFullYear(),n.getMonth()+1,0);if(n.getDate()!==a.getDate())return{isValid:!1,months:0};var o=r.getFullYear(),i=r.getMonth();return{isValid:!0,months:12*(n.getFullYear()-o)+(n.getMonth()-i)+1}}function A(){var t=new Date(g.value),e=new Date(w.value);if(t>=e)return(0,r.showAlert)("error","To date must be greater than or equal to From date."),void v.reset();if(!P(b)){var n=_(t,e);S.value=100*n.months}}function O(t){var e=t.trim().toLowerCase().match(/phase\s*(\d+)\s*,\s*block\s*(\d+)\s*,\s*lot\s*(\d+)/i);return e?{phase:parseInt(e[1]),block:parseInt(e[2]),lot:parseInt(e[3])}:null}function F(t){return N.apply(this,arguments)}function N(){return(N=s(u().mark(function t(e){var r,n,o,i,c;return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=O(e))){t.next=10;break}return n={phase:r.phase,block:r.block,lot:r.lot},o=new URLSearchParams(n),t.next=6,(0,a.postData)("/api/v1/getIds",{type:"house",object:n,message:"No address found with that search"});case 6:return i=t.sent,t.abrupt("return",{user:i.data.doc[0],url:"/api/v1/payments?".concat(o.toString())});case 10:return t.next=12,(0,a.postData)("/api/v1/getIds",{type:"user",object:{email:e},message:"No email found with that search"});case 12:return c=t.sent,t.abrupt("return",{user:c.data.doc[0],url:"/api/v1/payments?email=".concat(e)});case 14:case"end":return t.stop()}},t)}))).apply(this,arguments)}if(j&&(o.yearSelect.value=o.currentYear,o.yearSelect.addEventListener("change",function(){var t=parseInt(this.value);(0,o.loadPaymentStatement)(t,"/api/v1/payments/statement/".concat(o.yearSelect.value,"?id=").concat(k))})),l){var I=(new Date).getFullYear();q||(q=new t.PaginatedAdminPaymentList({container:L,paginationContainer:h,endpoint:"/api/v1/payments",type:"payments",itemsPerPage:10,sort:"paymentDate",fromDate:void 0,toDate:void 0}),(0,n.setupShowHandler)(x,q),p.addEventListener("submit",function(){var t=s(u().mark(function t(n){var a,i,c,s,l,h;return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),a=new FormData(n.target),i=a.get("search-input").trim()){t.next=6;break}return f.classList.add("visually-hidden"),t.abrupt("return");case 6:return t.prev=6,(0,e.buttonSpinner)(m,"Search","Searching"),t.next=10,F(i);case 10:return c=t.sent,s=c.user,l=c.url,k=s._id,q.endpoint=l,t.next=17,q.render();case 17:(0,o.loadPaymentStatement)(I,"/api/v1/payments/statement/".concat(I,"?id=").concat(s._id)),f.classList.remove("visually-hidden"),t.next=26;break;case 21:t.prev=21,t.t0=t.catch(6),console.error("Error searching for user:",t.t0),f.classList.add("visually-hidden"),(0,r.showAlert)("error",(null===(h=t.t0.response)||void 0===h||null===(h=h.data)||void 0===h?void 0:h.message)||"An error occurred while searching for user.");case 26:return t.prev=26,(0,e.buttonSpinner)(m,"Search","Searching"),t.finish(26);case 29:case"end":return t.stop()}},t,null,[[6,21,26,29]])}));return function(e){return t.apply(this,arguments)}}()),E.addEventListener("submit",function(){var t=s(u().mark(function t(e){var n,a,o,i;return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),n=new FormData(e.target),a=n.get("from-date-filter"),o=n.get("to-date-filter"),a||o?(q.fromDate=a,q.toDate=o):(q.fromDate=void 0,q.toDate=void 0),t.prev=5,t.next=8,q.render();case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(5),"CanceledError"===t.t0.name?L.innerHTML='\n          <tr>\n            <td colspan="100%">\n               <p class="text-red-600 m-0">A previous request was canceled.</p>\n            </td>\n          </tr>\n          ':(0,r.showAlert)("error",(null===(i=t.t0.response)||void 0===i||null===(i=i.data)||void 0===i?void 0:i.message)||"An error occurred while filtering payments.");case 13:case"end":return t.stop()}},t,null,[[5,10]])}));return function(e){return t.apply(this,arguments)}}()),v.addEventListener("submit",function(){var t=s(u().mark(function t(n){var i,c,s,l,f;return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),i=new FormData(n.target),c=i.get("from-manual-payment"),s=i.get("to-manual-payment"),l=i.get("or-statement"),t.prev=5,(0,e.buttonSpinner)(y,"Submit","Creating Payment"),t.next=9,(0,a.postData)("/api/v1/payments",{fromDate:c,toDate:s,amount:S.value,email:d.value.trim(),or:l});case 9:if("success"!==t.sent.status){t.next=17;break}return(0,r.showAlert)("success","Payment successfully created."),v.reset(),S.setAttribute("disabled","true"),t.next=16,q.render();case 16:(0,o.loadPaymentStatement)(I,"/api/v1/payments/statement/".concat(I,"?id=").concat(user._id));case 17:t.next=22;break;case 19:t.prev=19,t.t0=t.catch(5),(0,r.showAlert)("error",(null===(f=t.t0.response)||void 0===f||null===(f=f.data)||void 0===f?void 0:f.message)||"An error occurred while creating payment.");case 22:return t.prev=22,(0,e.buttonSpinner)(y,"Submit","Creating Payment"),t.finish(22);case 25:case"end":return t.stop()}},t,null,[[5,19,22,25]])}));return function(e){return t.apply(this,arguments)}}()),g.addEventListener("change",function(){w.value&&A()}),w.addEventListener("change",function(){!P(b)&&g.value&&A()}),b.addEventListener("change",function(){P(b)?(S.removeAttribute("disabled"),S.value=""):(S.setAttribute("disabled","true"),A())}))}
},{"../utils/PaginatedAdminList.js":"tFEn","../utils/spinner.js":"Zpwf","../utils/alerts.js":"VDCA","./admin_dashboard.js":"D52Z","../utils/http.js":"WyUo","../Me/me.js":"yxtE"}],"FKYw":[function(require,module,exports) {
"use strict";var t=require("../utils/alerts.js"),e=require("../utils/spinner.js"),r=require("../utils/http.js");function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(){o=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},u="function"==typeof Symbol?Symbol:{},c=u.iterator||"@@iterator",s=u.asyncIterator||"@@asyncIterator",l=u.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function h(t,e,r,n){var o=e&&e.prototype instanceof w?e:w,i=Object.create(o.prototype),u=new G(n||[]);return a(i,"_invoke",{value:O(t,r,u)}),i}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var y="suspendedStart",v="suspendedYield",d="executing",m="completed",g={};function w(){}function b(){}function L(){}var x={};f(x,c,function(){return this});var S=Object.getPrototypeOf,E=S&&S(S(F([])));E&&E!==r&&i.call(E,c)&&(x=E);var j=L.prototype=w.prototype=Object.create(x);function _(t){["next","throw","return"].forEach(function(e){f(t,e,function(t){return this._invoke(e,t)})})}function q(t,e){function r(o,a,u,c){var s=p(t[o],t,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==n(f)&&i.call(f,"__await")?e.resolve(f.__await).then(function(t){r("next",t,u,c)},function(t){r("throw",t,u,c)}):e.resolve(f).then(function(t){l.value=t,u(l)},function(t){return r("throw",t,u,c)})}c(s.arg)}var o;a(this,"_invoke",{value:function(t,n){function i(){return new e(function(e,o){r(t,n,e,o)})}return o=o?o.then(i,i):i()}})}function O(e,r,n){var o=y;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var c=k(u,n);if(c){if(c===g)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===y)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=p(e,r,n);if("normal"===s.type){if(o=n.done?m:v,s.arg===g)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=m,n.method="throw",n.arg=s.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var i=p(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function G(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function F(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(i.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(n(e)+" is not iterable")}return b.prototype=L,a(j,"constructor",{value:L,configurable:!0}),a(L,"constructor",{value:b,configurable:!0}),b.displayName=f(L,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,L):(t.__proto__=L,f(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},_(q.prototype),f(q.prototype,s,function(){return this}),e.AsyncIterator=q,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new q(h(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},_(j),f(j,l,"Generator"),f(j,c,function(){return this}),f(j,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=F,G.prototype={constructor:G,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,o){return u.type="throw",u.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],u=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=i.call(a,"catchLoc"),s=i.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:F(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function i(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function a(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var a=t.apply(e,r);function u(t){i(a,n,o,u,c,"next",t)}function c(t){i(a,n,o,u,c,"throw",t)}u(void 0)})}}var u=document.querySelector("#createResidentForm"),c=document.querySelector("#createResidentSubmitButton");u&&u.addEventListener("submit",function(){var n=a(o().mark(function n(i){var a,s,l,f,h,p,y,v,d,m;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i.preventDefault(),a=document.querySelector("#name").value,s=document.querySelector("#contactNumber").value,l=document.querySelector("#email").value,f=+document.querySelector("#phase").value,h=+document.querySelector("#block").value,p=+document.querySelector("#lot").value,y=document.querySelector("#street").value,v=document.querySelector("#password").value,d=document.querySelector("#confirmPassword").value,n.prev=10,(0,e.buttonSpinner)(c,"Create Resident","Submitting"),n.next=14,(0,r.postData)("/api/v1/users/signup",{name:a,contactNumber:s,email:l,address:{phase:f,block:h,lot:p,street:y},password:v,confirmPassword:d});case 14:"success"===(m=n.sent).status&&(0,t.showAlert)(m.data.message,"success"),u.reset(),n.next=23;break;case 19:n.prev=19,n.t0=n.catch(10),(0,t.showAlert)("error",n.t0.response.data.message),console.error(n.t0.response.data.message);case 23:return n.prev=23,(0,e.buttonSpinner)(c,"Create Resident","Submitting"),n.finish(23);case 26:case"end":return n.stop()}},n,null,[[10,19,23,26]])}));return function(t){return n.apply(this,arguments)}}());
},{"../utils/alerts.js":"VDCA","../utils/spinner.js":"Zpwf","../utils/http.js":"WyUo"}],"XRq8":[function(require,module,exports) {
"use strict";var t=require("../utils/alerts.js"),e=require("../utils/spinner.js"),r=require("../utils/http.js");function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(){o=function(){return e};var t,e={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},u="function"==typeof Symbol?Symbol:{},c=u.iterator||"@@iterator",s=u.asyncIterator||"@@asyncIterator",l=u.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function h(t,e,r,n){var o=e&&e.prototype instanceof w?e:w,a=Object.create(o.prototype),u=new P(n||[]);return i(a,"_invoke",{value:O(t,r,u)}),a}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var d="suspendedStart",v="suspendedYield",y="executing",m="completed",g={};function w(){}function b(){}function E(){}var x={};f(x,c,function(){return this});var L=Object.getPrototypeOf,S=L&&L(L(F([])));S&&S!==r&&a.call(S,c)&&(x=S);var j=E.prototype=w.prototype=Object.create(x);function k(t){["next","throw","return"].forEach(function(e){f(t,e,function(t){return this._invoke(e,t)})})}function _(t,e){function r(o,i,u,c){var s=p(t[o],t,i);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?e.resolve(f.__await).then(function(t){r("next",t,u,c)},function(t){r("throw",t,u,c)}):e.resolve(f).then(function(t){l.value=t,u(l)},function(t){return r("throw",t,u,c)})}c(s.arg)}var o;i(this,"_invoke",{value:function(t,n){function a(){return new e(function(e,o){r(t,n,e,o)})}return o=o?o.then(a,a):a()}})}function O(e,r,n){var o=d;return function(a,i){if(o===y)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var c=N(u,n);if(c){if(c===g)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var s=p(e,r,n);if("normal"===s.type){if(o=n.done?m:v,s.arg===g)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=m,n.method="throw",n.arg=s.arg)}}}function N(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,N(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=p(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function F(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(a.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(n(e)+" is not iterable")}return b.prototype=E,i(j,"constructor",{value:E,configurable:!0}),i(E,"constructor",{value:b,configurable:!0}),b.displayName=f(E,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,E):(t.__proto__=E,f(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},k(_.prototype),f(_.prototype,s,function(){return this}),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new _(h(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then(function(t){return t.done?t.value:i.next()})},k(j),f(j,l,"Generator"),f(j,c,function(){return this}),f(j,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=F,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,o){return u.type="throw",u.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],u=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=a.call(i,"catchLoc"),s=a.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:F(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function a(t,e,r,n,o,a,i){try{var u=t[a](i),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function i(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function u(t){a(i,n,o,u,c,"next",t)}function c(t){a(i,n,o,u,c,"throw",t)}u(void 0)})}}var u=document.getElementById("updateUserSection"),c=document.getElementById("updateSearchEmailForm"),s=document.getElementById("searchEmailButton"),l=document.getElementById("updateResidentForm"),f=document.getElementById("residentId"),h=document.getElementById("updateResidentButton");u&&(c.addEventListener("submit",function(){var n=i(o().mark(function n(a){var i,u,c,p;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(a.preventDefault(),(i=new FormData(a.target).get("searchEmail")).trim()){n.next=6;break}return l.reset(),h.setAttribute("disabled",!0),n.abrupt("return");case 6:return n.prev=6,(0,e.buttonSpinner)(s,"Check","Searching"),n.next=10,(0,r.postData)("/api/v1/getIds",{type:"user",object:{email:i},message:"No email was found"});case 10:u=n.sent,c=u.data.doc[0],console.log(c),"success"===u.status&&((0,t.showAlert)("success","Email was found!"),f.value=c._id,document.querySelector("#updateName").value=c.name,document.querySelector("#updateEmail").value=c.email,h.removeAttribute("disabled")),n.next=19;break;case 16:n.prev=16,n.t0=n.catch(6),(0,t.showAlert)("error",(null===(p=n.t0.response)||void 0===p||null===(p=p.data)||void 0===p?void 0:p.message)||"An error occurred");case 19:return n.prev=19,(0,e.buttonSpinner)(s,"Check","Searching"),n.finish(19);case 22:case"end":return n.stop()}},n,null,[[6,16,19,22]])}));return function(t){return n.apply(this,arguments)}}()),l.addEventListener("submit",function(){var n=i(o().mark(function n(a){var i,u,c;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a.preventDefault(),i=new FormData(a.target),n.prev=2,(0,e.buttonSpinner)(h,"Update","Updating"),u=f.value,n.next=7,(0,r.patchData)("/api/v1/users/".concat(u),{name:i.get("name"),email:i.get("email"),contactNumber:i.get("contactNumber"),role:i.get("role"),address:{phase:i.get("phase"),block:i.get("block"),lot:i.get("lot"),street:i.get("street")},password:i.get("password"),confirmPassword:i.get("confirmPassword")});case 7:"success"===n.sent.status&&((0,t.showAlert)("success","Resident updated successfully!"),l.reset(),h.setAttribute("disabled",!0)),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(2),(0,t.showAlert)("error",(null===(c=n.t0.response)||void 0===c||null===(c=c.data)||void 0===c?void 0:c.message)||"An error occurred");case 14:return n.prev=14,(0,e.buttonSpinner)(h,"Update","Updating"),n.finish(14);case 17:case"end":return n.stop()}},n,null,[[2,11,14,17]])}));return function(t){return n.apply(this,arguments)}}()));
},{"../utils/alerts.js":"VDCA","../utils/spinner.js":"Zpwf","../utils/http.js":"WyUo"}],"qkXa":[function(require,module,exports) {
"use strict";var t=require("../utils/PaginatedAdminList.js"),e=require("./admin_dashboard.js"),r=require("../utils/spinner.js"),n=require("../utils/alerts.js"),o=require("../utils/http.js");function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(){a=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},c="function"==typeof Symbol?Symbol:{},u=c.iterator||"@@iterator",s=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function h(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(t){h=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var i=e&&e.prototype instanceof w?e:w,a=Object.create(i.prototype),c=new A(n||[]);return o(a,"_invoke",{value:P(t,r,c)}),a}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=f;var v="suspendedStart",d="suspendedYield",y="executing",g="completed",m={};function w(){}function b(){}function x(){}var E={};h(E,u,function(){return this});var L=Object.getPrototypeOf,S=L&&L(L(F([])));S&&S!==r&&n.call(S,u)&&(E=S);var k=x.prototype=w.prototype=Object.create(E);function j(t){["next","throw","return"].forEach(function(e){h(t,e,function(t){return this._invoke(e,t)})})}function _(t,e){function r(o,a,c,u){var s=p(t[o],t,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==i(h)&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){r("next",t,c,u)},function(t){r("throw",t,c,u)}):e.resolve(h).then(function(t){l.value=t,c(l)},function(t){return r("throw",t,c,u)})}u(s.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e(function(e,o){r(t,n,e,o)})}return a=a?a.then(o,o):o()}})}function P(e,r,n){var o=v;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===g){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=O(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===v)throw o=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var s=p(e,r,n);if("normal"===s.type){if(o=n.done?g:d,s.arg===m)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=g,n.method="throw",n.arg=s.arg)}}}function O(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,O(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=p(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function q(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function B(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(q,this),this.reset(!0)}function F(e){if(e||""===e){var r=e[u];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(i(e)+" is not iterable")}return b.prototype=x,o(k,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:b,configurable:!0}),b.displayName=h(x,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,h(t,l,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},j(_.prototype),h(_.prototype,s,function(){return this}),e.AsyncIterator=_,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new _(f(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},j(k),h(k,l,"Generator"),h(k,u,function(){return this}),h(k,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=F,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(B),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),B(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;B(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:F(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function c(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function u(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){c(i,n,o,a,u,"next",t)}function u(t){c(i,n,o,a,u,"throw",t)}a(void 0)})}}var s=document.querySelector("#acceptEventBookingSection"),l=document.querySelector("#adminEventBookingTableBody"),h=document.querySelector("#adminEventBookingSearchForm"),f=document.querySelector("#adminEventBookingSearchFormButton"),p=document.querySelector("#sortEventBooking"),v=document.querySelector("#showEventBooking"),d=document.querySelector("#adminEventBookingPagination"),y="";s&&(y=new t.PaginatedAdminBookingEvent({container:l,paginationContainer:d,endpoint:"/api/v1/eventsresident",type:"eventResident",itemsPerPage:10,sort:"place"}),(0,e.setupSortHandler)(p,y),(0,e.setupShowHandler)(v,y),h.addEventListener("submit",function(){var t=u(a().mark(function t(e){var o,i,c;return a().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),o=new FormData(e.target),i=o.get("adminSearchBookingInput"),t.prev=3,(0,r.buttonSpinner)(f,"Search","Searching"),y.endpoint=i?"/api/v1/eventsresident?email=".concat(i):"/api/v1/eventsresident",y.currentPage=1,t.next=9,y.render();case 9:t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),l.innerHTML="",(0,n.showAlert)("error",(null===(c=t.t0.response)||void 0===c||null===(c=c.data)||void 0===c?void 0:c.message)||"An error occurred while searching.");case 15:return t.prev=15,(0,r.buttonSpinner)(f,"Search","Searching"),t.finish(15);case 18:case"end":return t.stop()}},t,null,[[3,11,15,18]])}));return function(e){return t.apply(this,arguments)}}()),l.addEventListener("click",function(){var t=u(a().mark(function t(e){var r,i,c,u,s;return a().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.preventDefault(),r=e.target.closest("button")){t.next=4;break}return t.abrupt("return");case 4:return i=r.dataset,c=i.eventstatus,u=i.eventid,t.prev=5,t.next=8,(0,o.patchData)("/api/v1/eventsresident/".concat(u),{approved:"approve"===c});case 8:if("success"!==t.sent.status){t.next=13;break}return(0,n.showAlert)("success","Event booking ".concat("approve"===c?"approved":"disapproved"," successfully!")),t.next=13,y.render();case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(5),(0,n.showAlert)("error",(null===(s=t.t0.response)||void 0===s||null===(s=s.data)||void 0===s?void 0:s.message)||"An error occurred while processing the request.");case 18:case"end":return t.stop()}},t,null,[[5,15]])}));return function(e){return t.apply(this,arguments)}}()),y.render());
},{"../utils/PaginatedAdminList.js":"tFEn","./admin_dashboard.js":"D52Z","../utils/spinner.js":"Zpwf","../utils/alerts.js":"VDCA","../utils/http.js":"WyUo"}],"oF2c":[function(require,module,exports) {
"use strict";function t(t){this.garbageList.innerHTML=t.map(function(t){return'\n      <div class="card mb-3">\n        <div class="card-header bg-light d-flex justify-content-between align-items-center">\n          <h5 class="card-title mb-0 text-slate-900 fw-bold">Phase '.concat(t.phase,'</h5>\n          <div class="dropdown mb-2 mb-md-0">\n             <button class="btn dropdown-toggle text-slate-600" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false">\n                 <i class="bi bi-gear"></i> Actions\n               </button>\n               <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">\n                  <li>\n                     <button class="dropdown-item btn btn-sm add-day text-slate-600 fw-semibold" data-garbage-id="').concat(t._id,'">\n                      Add Day\n                    </button>\n                   </li>\n                   <li>\n                     <button class="dropdown-item btn btn-sm edit-phase-number text-slate-600 fw-semibold" data-bs-toggle="modal" data-bs-target="#garbageModal" data-garbage-id="').concat(t._id,'">\n                        Edit Phase Number\n                      </button>\n                   </li> \n                   <li>\n                     <button class="dropdown-item btn btn-sm delete-phase-number text-slate-600 fw-semibold" data-garbage-id="').concat(t._id,'">\n                        Delete Phase\n                      </button>\n                   </li>\n               </ul>\n           </div>\n        </div>\n        <div class="card-body">\n          ').concat(t.schedule.map(function(n){return'\n            <div class="mb-3">\n              <div class="d-flex justify-content-between align-items-center mb-2">\n                <h6 class="mb-0 text-slate-700 fw-bold">'.concat(n.day,'</h6>\n                <div class="d-flex align-items-center gap-2">\n                  <button class="btn btn-sm add-time border border-slate-400 text-slate-400 fw-semibold" \n                    data-garbage-id="').concat(t._id,'"\n                    data-schedule-id="').concat(n._id,'">\n                    Add Time\n                  </button>\n                  <button class="btn btn-sm edit-name border border-slate-400 text-slate-400 fw-semibold" \n                    data-garbage-id="').concat(t._id,'"\n                    data-schedule-id="').concat(n._id,'">\n                    Edit Name\n                  </button>\n                </div>\n              </div>\n              <table class="table table-sm">\n                <thead>\n                  <tr>\n                    <th class="collection-width text-slate-700 fw-semibold">Time</th>\n                    <th class="collection-width text-slate-700 fw-semibold">Streets</th>\n                    <th class="collection-width text-slate-700 fw-semibold">Actions</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  ').concat(n.timeLocation.map(function(e){return'\n                    <tr>\n                      <td class="text-slate-600" style="vertical-align: middle">'.concat(e.time,'</td>\n                      <td class="text-slate-600" style="vertical-align: middle">').concat(e.street.join(", "),'</td>\n                      <td style="vertical-align: middle">\n                        <button class="btn btn-sm btn-outline-primary edit-time-location"\n                          data-garbage-id="').concat(t._id,'"\n                          data-schedule-id="').concat(n._id,'"\n                          data-time-location-id="').concat(e._id,'">\n                          Edit\n                        </button>\n                        <button class="btn btn-sm btn-outline-danger delete-time-location"\n                          data-garbage-id="').concat(t._id,'"\n                          data-schedule-id="').concat(n._id,'"\n                          data-time-location-id="').concat(e._id,'">\n                          Delete\n                        </button>\n                      </td>\n                    </tr>\n                  ')}).join(""),"\n                </tbody>\n              </table>\n            </div>\n          ")}).join(""),"\n        </div>\n      </div>\n    ")}).join("")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=exports.default=t;
},{}],"tTZ0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../../utils/http.js");function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(){r=function(){return n};var t,n={},o=Object.prototype,i=o.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},c="function"==typeof Symbol?Symbol:{},u=c.iterator||"@@iterator",l=c.asyncIterator||"@@asyncIterator",s=c.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function h(t,e,r,n){var o=e&&e.prototype instanceof b?e:b,i=Object.create(o.prototype),c=new q(n||[]);return a(i,"_invoke",{value:O(t,r,c)}),i}function y(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}n.wrap=h;var p="suspendedStart",d="suspendedYield",v="executing",m="completed",g={};function b(){}function w(){}function x(){}var E={};f(E,u,function(){return this});var L=Object.getPrototypeOf,S=L&&L(L(N([])));S&&S!==o&&i.call(S,u)&&(E=S);var j=x.prototype=b.prototype=Object.create(E);function I(t){["next","throw","return"].forEach(function(e){f(t,e,function(t){return this._invoke(e,t)})})}function _(t,r){function n(o,a,c,u){var l=y(t[o],t,a);if("throw"!==l.type){var s=l.arg,f=s.value;return f&&"object"==e(f)&&i.call(f,"__await")?r.resolve(f.__await).then(function(t){n("next",t,c,u)},function(t){n("throw",t,c,u)}):r.resolve(f).then(function(t){s.value=t,c(s)},function(t){return n("throw",t,c,u)})}u(l.arg)}var o;a(this,"_invoke",{value:function(t,e){function i(){return new r(function(r,o){n(t,e,r,o)})}return o=o?o.then(i,i):i()}})}function O(e,r,n){var o=p;return function(i,a){if(o===v)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=k(c,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=v;var l=y(e,r,n);if("normal"===l.type){if(o=n.done?m:d,l.arg===g)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=m,n.method="throw",n.arg=l.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var i=y(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function q(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function N(r){if(r||""===r){var n=r[u];if(n)return n.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var o=-1,a=function e(){for(;++o<r.length;)if(i.call(r,o))return e.value=r[o],e.done=!1,e;return e.value=t,e.done=!0,e};return a.next=a}}throw new TypeError(e(r)+" is not iterable")}return w.prototype=x,a(j,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:w,configurable:!0}),w.displayName=f(x,s,"GeneratorFunction"),n.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,f(t,s,"GeneratorFunction")),t.prototype=Object.create(j),t},n.awrap=function(t){return{__await:t}},I(_.prototype),f(_.prototype,l,function(){return this}),n.AsyncIterator=_,n.async=function(t,e,r,o,i){void 0===i&&(i=Promise);var a=new _(h(t,e,r,o),i);return n.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},I(j),f(j,s,"Generator"),f(j,u,function(){return this}),f(j,"toString",function(){return"[object Generator]"}),n.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},n.values=N,q.prototype={constructor:q,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=i.call(a,"catchLoc"),l=i.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},n}function n(t,e){return u(t)||c(t,e)||i(t,e)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(t,e){if(t){if("string"==typeof t)return a(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function c(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}function u(t){if(Array.isArray(t))return t}function l(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function s(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){l(i,n,o,a,c,"next",t)}function c(t){l(i,n,o,a,c,"throw",t)}a(void 0)})}}function f(t,e){return h.apply(this,arguments)}function h(){return(h=s(r().mark(function e(o,i){var a,c,u,l,s,f,h,y,p,d,v,m;return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.garbageId,c=o.scheduleId,u=o.timeLocationId,e.prev=1,document.getElementById("garbageId").value=a,document.getElementById("scheduleId").value=c,document.getElementById("timeLocationId").value=u,e.next=7,(0,t.fetchData)("/api/v1/garbages/".concat(a));case 7:l=e.sent,s=l.data.doc,f=s.schedule.find(function(t){return t._id===c}),h=f.timeLocation.find(function(t){return t._id===u}),document.querySelector("#modalTitle").textContent="Edit Time ".concat(h.time),document.querySelector("#timeContainer").style.display="block",document.querySelector("#streetContainer").style.display="block",document.querySelector("#dayContainer").style.display="none",document.querySelector("#phaseContainer").style.display="none",(y=document.createElement("input")).type="hidden",y.id="type",y.value=i,document.querySelector("#phaseContainer").appendChild(y),this.checkRequiredForm(),p=h.time.split("-"),d=n(p,2),v=d[0],m=d[1],document.getElementById("timeFrom").value=v,document.getElementById("timeTo").value=m,document.getElementById("streetInputs").innerHTML=h.street.map(function(t,e){return'\n        <div class="input-group mb-2">\n          <input type="text" class="form-control street-input" value="'.concat(t,'" required>\n          ').concat(0===e?'<button type="button" class="btn btn-outline-secondary add-street">+</button>':'<button type="button" class="btn btn-outline-danger remove-street">-</button>',"\n        </div>\n      ")}).join(""),this.modal.show(),e.next=34;break;case 30:e.prev=30,e.t0=e.catch(1),console.log(e.t0),this.showNotificationModal("Error","Error loading time location data","danger");case 34:case"end":return e.stop()}},e,this,[[1,30]])}))).apply(this,arguments)}var y=exports.default=f;
},{"../../utils/http.js":"WyUo"}],"E0IA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.deleteModalFunc=i;var t=require("../../utils/http.js");function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(){r=function(){return n};var t,n={},o=Object.prototype,i=o.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},c="function"==typeof Symbol?Symbol:{},u=c.iterator||"@@iterator",l=c.asyncIterator||"@@asyncIterator",s=c.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function h(t,e,r,n){var o=e&&e.prototype instanceof b?e:b,i=Object.create(o.prototype),c=new G(n||[]);return a(i,"_invoke",{value:k(t,r,c)}),i}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}n.wrap=h;var p="suspendedStart",y="suspendedYield",v="executing",m="completed",g={};function b(){}function w(){}function x(){}var E={};f(E,u,function(){return this});var L=Object.getPrototypeOf,_=L&&L(L(T([])));_&&_!==o&&i.call(_,u)&&(E=_);var j=x.prototype=b.prototype=Object.create(E);function O(t){["next","throw","return"].forEach(function(e){f(t,e,function(t){return this._invoke(e,t)})})}function S(t,r){function n(o,a,c,u){var l=d(t[o],t,a);if("throw"!==l.type){var s=l.arg,f=s.value;return f&&"object"==e(f)&&i.call(f,"__await")?r.resolve(f.__await).then(function(t){n("next",t,c,u)},function(t){n("throw",t,c,u)}):r.resolve(f).then(function(t){s.value=t,c(s)},function(t){return n("throw",t,c,u)})}u(l.arg)}var o;a(this,"_invoke",{value:function(t,e){function i(){return new r(function(r,o){n(t,e,r,o)})}return o=o?o.then(i,i):i()}})}function k(e,r,n){var o=p;return function(i,a){if(o===v)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=M(c,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=v;var l=d(e,r,n);if("normal"===l.type){if(o=n.done?m:y,l.arg===g)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=m,n.method="throw",n.arg=l.arg)}}}function M(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,M(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var i=d(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function N(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function G(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(N,this),this.reset(!0)}function T(r){if(r||""===r){var n=r[u];if(n)return n.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var o=-1,a=function e(){for(;++o<r.length;)if(i.call(r,o))return e.value=r[o],e.done=!1,e;return e.value=t,e.done=!0,e};return a.next=a}}throw new TypeError(e(r)+" is not iterable")}return w.prototype=x,a(j,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:w,configurable:!0}),w.displayName=f(x,s,"GeneratorFunction"),n.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,f(t,s,"GeneratorFunction")),t.prototype=Object.create(j),t},n.awrap=function(t){return{__await:t}},O(S.prototype),f(S.prototype,l,function(){return this}),n.AsyncIterator=S,n.async=function(t,e,r,o,i){void 0===i&&(i=Promise);var a=new S(h(t,e,r,o),i);return n.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},O(j),f(j,s,"Generator"),f(j,u,function(){return this}),f(j,"toString",function(){return"[object Generator]"}),n.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},n.values=T,G.prototype={constructor:G,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=i.call(a,"catchLoc"),l=i.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},n}function n(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function o(t){return function(){var e=this,r=arguments;return new Promise(function(o,i){var a=t.apply(e,r);function c(t){n(a,o,i,c,u,"next",t)}function u(t){n(a,o,i,c,u,"throw",t)}c(void 0)})}}function i(e,n){var i=this,a='\n    <div class="modal fade" id="deleteConfirmModal" tabindex="-1">\n      <div class="modal-dialog modal-dialog-centered">\n        <div class="modal-content">\n          <div class="modal-header bg-danger text-white">\n            <h5 class="modal-title">Delete Confirmation</h5>\n            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>\n          </div>\n          <div class="modal-body">\n            <p>Are you sure you want to delete this '.concat(e,'?</p>\n            <p>This action cannot be undone.</p>\n          </div>\n          <div class="modal-footer">\n            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>\n            <button type="button" class="btn btn-danger" id="confirmDelete">Delete</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  ');document.body.insertAdjacentHTML("beforeend",a);var c=new bootstrap.Modal(document.getElementById("deleteConfirmModal"));document.getElementById("deleteConfirmModal").addEventListener("hide.bs.modal",function(){document.getElementById("deleteConfirmModal").remove()}),c.show(),document.getElementById("confirmDelete").addEventListener("click",o(r().mark(function o(){return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,(0,t.deleteData)(n);case 3:c.hide(),i.showNotificationModal("Success","".concat(e," deleted successfully"),"success"),i.loadCollections(),r.next=12;break;case 8:r.prev=8,r.t0=r.catch(0),c.hide(),i.showNotificationModal("Error","Error deleting ".concat(e),"danger");case 12:case"end":return r.stop()}},o,null,[[0,8]])})))}
},{"../../utils/http.js":"WyUo"}],"Easi":[function(require,module,exports) {
"use strict";var e=require("../utils/alerts.js"),t=require("../utils/http.js"),n=i(require("./GarbageHandler/collectionTemplate.js")),r=i(require("./GarbageHandler/handleEdit.js")),a=require("../utils/spinner.js"),o=require("./GarbageHandler/deleteModal.js");function i(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(){s=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,n){return e[t]=n}}function h(e,t,n,r){var o=t&&t.prototype instanceof b?t:b,i=Object.create(o.prototype),c=new M(r||[]);return a(i,"_invoke",{value:D(e,n,c)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=h;var m="suspendedStart",p="suspendedYield",v="executing",g="completed",y={};function b(){}function w(){}function I(){}var E={};d(E,i,function(){return this});var x=Object.getPrototypeOf,L=x&&x(x(T([])));L&&L!==n&&r.call(L,i)&&(E=L);var k=I.prototype=b.prototype=Object.create(E);function S(e){["next","throw","return"].forEach(function(t){d(e,t,function(e){return this._invoke(t,e)})})}function F(e,t){function n(a,o,i,s){var u=f(e[a],e,o);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==c(d)&&r.call(d,"__await")?t.resolve(d.__await).then(function(e){n("next",e,i,s)},function(e){n("throw",e,i,s)}):t.resolve(d).then(function(e){l.value=e,i(l)},function(e){return n("throw",e,i,s)})}s(u.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t(function(t,a){n(e,r,t,a)})}return o=o?o.then(a,a):a()}})}function D(t,n,r){var a=m;return function(o,i){if(a===v)throw Error("Generator is already running");if(a===g){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var c=r.delegate;if(c){var s=B(c,r);if(s){if(s===y)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===m)throw a=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=v;var u=f(t,n,r);if("normal"===u.type){if(a=r.done?g:p,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=g,r.method="throw",r.arg=u.arg)}}}function B(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,B(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=f(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function q(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(q,this),this.reset(!0)}function T(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(c(t)+" is not iterable")}return w.prototype=I,a(k,"constructor",{value:I,configurable:!0}),a(I,"constructor",{value:w,configurable:!0}),w.displayName=d(I,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,I):(e.__proto__=I,d(e,l,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},S(F.prototype),d(F.prototype,u,function(){return this}),t.AsyncIterator=F,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new F(h(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then(function(e){return e.done?e.value:i.next()})},S(k),d(k,l,"Generator"),d(k,i,function(){return this}),d(k,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=T,M.prototype={constructor:M,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return c.type="throw",c.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;j(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:T(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function u(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function l(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){u(o,r,a,i,c,"next",e)}function c(e){u(o,r,a,i,c,"throw",e)}i(void 0)})}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,m(r.key),r)}}function f(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function m(e){var t=p(e,"string");return"symbol"==c(t)?t:t+""}function p(e,t){if("object"!=c(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var v=document.querySelector("#garbageCollectionSection"),g=function(){return f(function e(){var t=this;d(this,e),this.garbageForm=document.getElementById("garbageForm"),this.garbageList=document.getElementById("garbageList"),this.modal=new bootstrap.Modal(document.getElementById("garbageModal")),this.setupEventListeners(),this.loadCollections(),document.getElementById("garbageModal").addEventListener("hide.bs.modal",function(){t.resetForm()})},[{key:"setupEventListeners",value:function(){var e=this;this.garbageForm.addEventListener("submit",function(t){t.preventDefault(),e.handleFormSubmit()}),document.getElementById("streetInputs").addEventListener("click",function(t){t.target.matches(".add-street")&&e.addStreetInput(),t.target.matches(".remove-street")&&t.target.closest(".input-group").remove()}),this.garbageList.addEventListener("click",function(t){t.target.matches(".edit-time-location")&&e.handleEdit(t.target.dataset,"edit"),t.target.matches(".delete-time-location")&&e.handleDelete(t.target.dataset),t.target.matches(".add-day")&&e.handleAddDay(t.target.dataset.garbageId),t.target.matches(".add-time")&&e.handleAddTime(t.target.dataset),t.target.matches(".edit-name")&&e.handleEditName(t.target.dataset),t.target.matches(".edit-phase-number")&&e.handleEditPhaseNumber(t.target.dataset.garbageId),t.target.matches(".delete-phase-number")&&e.handleDeletePhase(t.target.dataset.garbageId)}),document.getElementById("garbageModal").addEventListener("hidden.bs.modal",function(){e.resetForm()})}},{key:"loadCollections",value:function(){var n=l(s().mark(function n(){var r;return s().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return(0,a.spinner)(this.garbageList,"Fetching collections"),n.prev=1,n.next=4,(0,t.fetchData)("/api/v1/garbages");case 4:r=n.sent,this.renderCollections(r.data.doc),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(1),this.garbageList.innerHTML="<div class='text-center text-slate-600 p-2'><h2>Something went wrong.</h2></div>",(0,e.showAlert)("error",n.t0.message);case 12:case"end":return n.stop()}},n,this,[[1,8]])}));return function(){return n.apply(this,arguments)}}()},{key:"renderCollections",value:function(e){n.default.call(this,e)}},{key:"handleFormSubmit",value:function(){var n=l(s().mark(function n(){var r,o,i,c;return s().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r=this.getFormData(),o=document.querySelector("#saveBtnCollection"),i={phase:r.phase,schedule:{day:r.day,timeLocation:{time:r.timeLocation.time,street:r.timeLocation.street}}},console.log(i),n.prev=4,(0,a.buttonSpinner)(o,"Save","Saving"),!i.phase||""!==i.schedule.day){n.next=11;break}return n.next=9,(0,t.patchData)("/api/v1/garbages/".concat(r.garbageId),{phase:i.phase});case 9:n.next=29;break;case 11:if(!i.schedule.day||""!==i.phase){n.next=16;break}return n.next=14,(0,t.postData)("/api/v1/garbages/schedule/".concat(r.garbageId),{schedule:{day:i.schedule.day}});case 14:n.next=29;break;case 16:if(!(i.schedule.timeLocation.time&&i.schedule.timeLocation.street.length>0&&""===i.phase)){n.next=27;break}if(console.log("else if"),!document.getElementById("type")||"edit"!==document.getElementById("type").value){n.next=23;break}return n.next=21,(0,t.patchData)("/api/v1/garbages/schedule/".concat(r.garbageId,"/").concat(r.scheduleId,"/").concat(r.timeLocationId),{timeLocation:i.schedule.timeLocation});case 21:n.next=25;break;case 23:return n.next=25,(0,t.postData)("/api/v1/garbages/schedule/".concat(r.garbageId,"/").concat(r.scheduleId),{timeLocation:i.schedule.timeLocation});case 25:n.next=29;break;case 27:return n.next=29,(0,t.postData)("/api/v1/garbages",i);case 29:this.resetForm(),this.modal.hide(),this.loadCollections(),(0,e.showAlert)("success","Collection updated successfully"),n.next=38;break;case 35:n.prev=35,n.t0=n.catch(4),(0,e.showAlert)("error",(null===n.t0||void 0===n.t0||null===(c=n.t0.response)||void 0===c||null===(c=c.data)||void 0===c?void 0:c.message)||"Something went wrong with the request.");case 38:return n.prev=38,(0,a.buttonSpinner)(o,"Save","Saving"),n.finish(38);case 41:case"end":return n.stop()}},n,this,[[4,35,38,41]])}));return function(){return n.apply(this,arguments)}}()},{key:"getFormData",value:function(){return{garbageId:document.getElementById("garbageId").value,scheduleId:document.getElementById("scheduleId").value,timeLocationId:document.getElementById("timeLocationId").value,phase:document.getElementById("phase").value,day:document.getElementById("day").value,timeLocation:{time:"".concat(document.getElementById("timeFrom").value,"-").concat(document.getElementById("timeTo").value),street:Array.from(document.querySelectorAll(".street-input")).map(function(e){return e.value}).filter(Boolean)}}}},{key:"addStreetInput",value:function(){var e=document.createElement("div");e.className="input-group mb-2",e.innerHTML='\n    <input type="text" class="form-control street-input" required>\n    <button type="button" class="btn btn-outline-danger remove-street">-</button>\n  ',document.getElementById("streetInputs").appendChild(e)}},{key:"checkRequiredForm",value:function(){this.garbageForm.querySelectorAll("input, select").forEach(function(e){var t=e.closest('div[id$="Container"]');t&&"none"===t.style.display?e.removeAttribute("required"):e.setAttribute("required","")})}},{key:"resetForm",value:function(){this.garbageForm.reset(),this.configureModalDisplay({title:"Add Collection",showTime:!0,showStreet:!0,showDay:!0,showPhase:!0}),document.getElementById("streetInputs").innerHTML='\n    <div class="input-group mb-2">\n      <input type="text" class="form-control street-input" required>\n      <button type="button" class="btn btn-outline-secondary add-street">+</button>\n    </div>\n  '}},{key:"configureModalDisplay",value:function(e){var t=e.title,n=e.showTime,r=void 0!==n&&n,a=e.showStreet,o=void 0!==a&&a,i=e.showDay,c=void 0!==i&&i,s=e.showPhase,u=void 0!==s&&s;document.querySelector("#modalTitle").textContent=t,document.querySelector("#timeContainer").style.display=r?"block":"none",document.querySelector("#streetContainer").style.display=o?"block":"none",document.querySelector("#dayContainer").style.display=c?"block":"none",document.querySelector("#phaseContainer").style.display=u?"block":"none",this.checkRequiredForm()}},{key:"setFormValues",value:function(e){var t=e.garbageId,n=void 0===t?"":t,r=e.scheduleId,a=void 0===r?"":r,o=e.phase,i=void 0===o?"":o,c=e.day,s=void 0===c?"":c,u=e.timeFrom,l=void 0===u?"":u,d=e.timeTo,h=void 0===d?"":d,f=e.timeLocationId,m=void 0===f?"":f;document.getElementById("garbageId").value=n,document.getElementById("scheduleId").value=a,document.getElementById("phase").value=i,document.getElementById("day").value=s,document.getElementById("timeFrom").value=l,document.getElementById("timeTo").value=h,void 0!==m&&(document.getElementById("timeLocationId").value=m)}},{key:"fetchGarbageData",value:function(){var e=l(s().mark(function e(n){var r;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,t.fetchData)("/api/v1/garbages/".concat(n));case 2:return r=e.sent,e.abrupt("return",r.data.doc);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleDelete",value:function(){var e=l(s().mark(function e(t){var n,r,a;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.garbageId,r=t.scheduleId,a=t.timeLocationId,o.deleteModalFunc.call(this,"Time Location","/api/v1/garbages/schedule/".concat(n,"/").concat(r,"/").concat(a));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleEdit",value:function(){var e=l(s().mark(function e(t,n){var a,o,i;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.garbageId,o=t.scheduleId,i=t.timeLocationId,e.next=3,r.default.call(this,{garbageId:a,scheduleId:o,timeLocationId:i},n);case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"handleAddDay",value:function(){var e=l(s().mark(function e(t){var n;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchGarbageData(t);case 2:n=e.sent,this.setFormValues({garbageId:t}),this.configureModalDisplay({title:"Add Day for Phase ".concat(n.phase),showDay:!0}),this.checkRequiredForm(),this.modal.show();case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleAddTime",value:function(){var e=l(s().mark(function e(t){var n,r,a,o;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.garbageId,r=t.scheduleId,e.next=3,this.fetchGarbageData(n);case 3:a=e.sent,o=a.schedule.find(function(e){return e._id===r}),this.setFormValues({garbageId:n,scheduleId:r}),this.configureModalDisplay({title:"Add Time for ".concat(o.day),showTime:!0,showStreet:!0}),this.checkRequiredForm(),this.modal.show();case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleEditPhaseNumber",value:function(){var e=l(s().mark(function e(t){var n;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchGarbageData(t);case 2:n=e.sent,this.setFormValues({garbageId:t,phase:n.phase}),this.configureModalDisplay({title:"Edit Phase Number (".concat(n.phase,")"),showPhase:!0}),this.checkRequiredForm();case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleEditName",value:function(){var e=l(s().mark(function e(t){var n,r,a,o;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.garbageId,r=t.scheduleId,this.resetForm(),e.next=4,this.fetchGarbageData(n);case 4:a=e.sent,o=a.schedule.find(function(e){return e._id===r}),this.setFormValues({day:o.day}),this.configureModalDisplay({title:"Edit Day Name",showDay:!0}),this.modal.show();case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleDeletePhase",value:function(){var e=l(s().mark(function e(t){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o.deleteModalFunc.call(this,"Phase","/api/v1/garbages/".concat(t));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"showNotificationModal",value:function(e,t,n){var r=this,a='\n    <div class="modal fade" id="notificationModal" tabindex="-1">\n      <div class="modal-dialog modal-dialog-centered">\n        <div class="modal-content">\n          <div class="modal-header bg-'.concat(n,' text-white">\n            <h5 class="modal-title">').concat(e,'</h5>\n            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>\n          </div>\n          <div class="modal-body">\n            <p>').concat(t,'</p>\n          </div>\n          <div class="modal-footer">\n            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  ');document.body.insertAdjacentHTML("beforeend",a);var o=new bootstrap.Modal(document.getElementById("notificationModal"));document.getElementById("notificationModal").addEventListener("hide.bs.modal",function(){r.resetForm(),document.getElementById("notificationModal").remove()}),o.show()}}])}();v&&new g;
},{"../utils/alerts.js":"VDCA","../utils/http.js":"WyUo","./GarbageHandler/collectionTemplate.js":"oF2c","./GarbageHandler/handleEdit.js":"tTZ0","../utils/spinner.js":"Zpwf","./GarbageHandler/deleteModal.js":"E0IA"}],"l2Pd":[function(require,module,exports) {
"use strict";var t=o(require("../utils/PaginatedList.js")),e=require("../utils/http.js"),r=require("../utils/alerts.js"),n=require("../utils/spinner.js");function o(t){return t&&t.__esModule?t:{default:t}}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(){a=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},c="function"==typeof Symbol?Symbol:{},u=c.iterator||"@@iterator",s=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function h(t,e,r,n){var i=e&&e.prototype instanceof w?e:w,a=Object.create(i.prototype),c=new A(n||[]);return o(a,"_invoke",{value:k(t,r,c)}),a}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var v="suspendedStart",p="suspendedYield",y="executing",m="completed",g={};function w(){}function b(){}function L(){}var E={};f(E,u,function(){return this});var x=Object.getPrototypeOf,S=x&&x(x(T([])));S&&S!==r&&n.call(S,u)&&(E=S);var j=L.prototype=w.prototype=Object.create(E);function _(t){["next","throw","return"].forEach(function(e){f(t,e,function(t){return this._invoke(e,t)})})}function O(t,e){function r(o,a,c,u){var s=d(t[o],t,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==i(f)&&n.call(f,"__await")?e.resolve(f.__await).then(function(t){r("next",t,c,u)},function(t){r("throw",t,c,u)}):e.resolve(f).then(function(t){l.value=t,c(l)},function(t){return r("throw",t,c,u)})}u(s.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e(function(e,o){r(t,n,e,o)})}return a=a?a.then(o,o):o()}})}function k(e,r,n){var o=v;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=q(c,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===v)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var s=d(e,r,n);if("normal"===s.type){if(o=n.done?m:p,s.arg===g)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=m,n.method="throw",n.arg=s.arg)}}}function q(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,q(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var i=d(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[u];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(i(e)+" is not iterable")}return b.prototype=L,o(j,"constructor",{value:L,configurable:!0}),o(L,"constructor",{value:b,configurable:!0}),b.displayName=f(L,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,L):(t.__proto__=L,f(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},_(O.prototype),f(O.prototype,s,function(){return this}),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(h(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},_(j),f(j,l,"Generator"),f(j,u,function(){return this}),f(j,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function c(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function u(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){c(i,n,o,a,u,"next",t)}function u(t){c(i,n,o,a,u,"throw",t)}a(void 0)})}}var s=document.querySelector("#event-list-container"),l=document.querySelector("#event-list-pagination"),f=document.querySelector("#attendEventSingle"),h=document.querySelector("#attendEventIndex"),d=document.querySelector("#viewAttendeesBtn"),v=document.querySelector("#viewAttendeesBtn span"),p=document.querySelector("#attendeesModal"),y=document.querySelector("#attendees-list");function m(t){return'\n    <div class="list-group-item d-flex justify-content-between align-items-center">\n      <div>\n        <h6 class="mb-1">'.concat(t.name," <br/> ").concat(t.email,'</h6>\n        <small class="text-muted">').concat(t.contactNumber||"No contact number","</small>\n      </div>\n    </div>\n  ")}d&&d.addEventListener("click",u(a().mark(function t(){return a().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:new bootstrap.Modal(p).show();case 2:case"end":return t.stop()}},t)})));var g=null;if(s&&(g||(g=new t.default({container:s,paginationContainer:l,endpoint:"/api/v1/events",type:"events",itemsPerPage:1})),g.render()),f||h){var w=document.querySelector(".attend-button");w.addEventListener("click",u(a().mark(function t(){var o,i,c,u,s,l;return a().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=w.dataset,i=o.eventid,c=o.attended,u="true"===c,t.prev=2,(0,n.buttonSpinner)(w,u?"Leave Event":"Attend Event","Submitting"),t.next=6,(0,e.postData)("/api/v1/events/".concat(i,"/attend?type=").concat(u?"leave":"attend"));case 6:s=t.sent,console.log(s),"success"===s.status&&(u=!u,w.dataset.attended=u,(0,r.showAlert)("success",u?"You have successfully attended the event.":"You have successfully left the event."),y.innerHTML="",v.innerHTML=s.data.updatedEvent.attendees.length,s.data.updatedEvent.attendees.forEach(function(t){y.insertAdjacentHTML("beforeend",m(t))})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2),(0,r.showAlert)("error",(null===(l=t.t0.response)||void 0===l||null===(l=l.data)||void 0===l?void 0:l.message)||"Failed to attend the event. Please try again later.");case 14:return t.prev=14,(0,n.buttonSpinner)(w,u?"Leave Event":"Attend Event","Submitting"),t.finish(14);case 17:case"end":return t.stop()}},t,null,[[2,11,14,17]])})))}
},{"../utils/PaginatedList.js":"IxEj","../utils/http.js":"WyUo","../utils/alerts.js":"VDCA","../utils/spinner.js":"Zpwf"}],"rc7b":[function(require,module,exports) {
"use strict";function e(e,a,n,i){var t=arguments.length>4&&void 0!==arguments[4]?arguments[4]:".pagination",c=document.querySelector(t);c.innerHTML="";var l=document.createElement("li");if(l.className="page-item ".concat(1===a?"disabled":""),l.innerHTML='\n    <a class="page-link" aria-label="Previous">\n      <span aria-hidden="true">«</span>\n    </a>\n  ',a>1&&l.addEventListener("click",function(){return i(a-1)}),c.appendChild(l),e<=5)for(var r=function(e){var n=document.createElement("li");n.className="page-item ".concat(e===a?"active":""),n.innerHTML='<a class="page-link">'.concat(e,"</a>"),n.addEventListener("click",function(){return i(e)}),c.appendChild(n)},d=1;d<=e;d++)r(d);else{var s=function(e){var n=document.createElement("li");n.className="page-item ".concat(e===a?"active":""),n.innerHTML='<a class="page-link">'.concat(e,"</a>"),n.addEventListener("click",function(){return i(e)}),c.appendChild(n)};if(s(1),a>4){var p=document.createElement("li");p.className="page-item disabled",p.innerHTML='<a class="page-link">...</a>',c.appendChild(p)}for(var o=Math.max(2,a-2);o<=Math.min(e-1,a+2);o++)s(o);if(a<e-3){var m=document.createElement("li");m.className="page-item disabled",m.innerHTML='<a class="page-link">...</a>',c.appendChild(m)}s(e)}var u=document.createElement("li");u.className="page-item ".concat(n?"":"disabled"),u.innerHTML='\n    <a class="page-link" aria-label="Next">\n      <span aria-hidden="true">»</span>\n    </a>\n  ',n&&u.addEventListener("click",function(){return i(a+1)}),c.appendChild(u)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.renderPagination=e;
},{}],"Myku":[function(require,module,exports) {
"use strict";var e=require("../utils/alerts.js"),t=require("../utils/renderPagination.js"),n=require("../utils/spinner.js"),r=require("../utils/http.js");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){o=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,s=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},c=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,n){return e[t]=n}}function p(e,t,n,r){var a=t&&t.prototype instanceof b?t:b,o=Object.create(a.prototype),i=new _(r||[]);return s(o,"_invoke",{value:T(e,n,i)}),o}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=p;var h="suspendedStart",m="suspendedYield",g="executing",v="completed",y={};function b(){}function w(){}function x(){}var L={};d(L,c,function(){return this});var S=Object.getPrototypeOf,E=S&&S(S(H([])));E&&E!==n&&r.call(E,c)&&(L=E);var k=x.prototype=b.prototype=Object.create(L);function M(e){["next","throw","return"].forEach(function(t){d(e,t,function(e){return this._invoke(t,e)})})}function q(e,t){function n(o,s,i,c){var u=f(e[o],e,s);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==a(d)&&r.call(d,"__await")?t.resolve(d.__await).then(function(e){n("next",e,i,c)},function(e){n("throw",e,i,c)}):t.resolve(d).then(function(e){l.value=e,i(l)},function(e){return n("throw",e,i,c)})}c(u.arg)}var o;s(this,"_invoke",{value:function(e,r){function a(){return new t(function(t,a){n(e,r,t,a)})}return o=o?o.then(a,a):a()}})}function T(t,n,r){var a=h;return function(o,s){if(a===g)throw Error("Generator is already running");if(a===v){if("throw"===o)throw s;return{value:e,done:!0}}for(r.method=o,r.arg=s;;){var i=r.delegate;if(i){var c=A(i,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===h)throw a=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=g;var u=f(t,n,r);if("normal"===u.type){if(a=r.done?v:m,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=v,r.method="throw",r.arg=u.arg)}}}function A(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,A(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=f(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var s=o.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function H(t){if(t||""===t){var n=t[c];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,s=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return s.next=s}}throw new TypeError(a(t)+" is not iterable")}return w.prototype=x,s(k,"constructor",{value:x,configurable:!0}),s(x,"constructor",{value:w,configurable:!0}),w.displayName=d(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,d(e,l,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},M(q.prototype),d(q.prototype,u,function(){return this}),t.AsyncIterator=q,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var s=new q(p(e,n,r,a),o);return t.isGeneratorFunction(n)?s:s.next().then(function(e){return e.done?e.value:s.next()})},M(k),d(k,l,"Generator"),d(k,c,function(){return this}),d(k,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=H,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return i.type="throw",i.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],i=s.completion;if("root"===s.tryLoc)return a("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return a(s.catchLoc,!0);if(this.prev<s.finallyLoc)return a(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return a(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return a(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;P(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:H(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function s(e,t,n,r,a,o,s){try{var i=e[o](s),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,a)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){s(o,r,a,i,c,"next",e)}function c(e){s(o,r,a,i,c,"throw",e)}i(void 0)})}}var c,u=document.querySelector("#type-single-container"),l=u&&u.dataset.userid,d=u&&u.dataset.typeid,p=u&&u.dataset.type,f=document.querySelector("#forum-messages"),h=document.querySelector("#form-message"),m=document.querySelector("#submit-message-btn"),g=document.querySelector("#comment-pagination-type"),v=1,y=10,b=!1;function w(e){var t=new Date,n=new Date(e),r=Math.abs(t-n),a=Math.floor(r/864e5);if(t.toDateString()===n.toDateString())return"Today ".concat(n.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",timeZone:"Asia/Manila"}));if(1===a)return"1d";if(a<7)return"".concat(a,"d");if(a<30){var o=Math.floor(a/7);return"".concat(o,"w")}if(a<365){var s=Math.floor(a/30);return"".concat(s,"mo")}var i=Math.floor(a/365);return"".concat(i,"y")}function x(t){return new Promise(function(n){var r=document.querySelector("#delete-message-dialog");r&&r.remove();document.body.insertAdjacentHTML("beforeend",'\n      <div class="modal fade" id="delete-message-dialog" tabindex="-1" aria-hidden="true">\n        <div class="modal-dialog modal-dialog-centered">\n          <div class="modal-content">\n            <div class="modal-header">\n              <h5 class="modal-title">Delete Message</h5>\n              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>\n            </div>\n            <div class="modal-body">\n              <p>Are you sure you want to delete this message? This action cannot be undone.</p>\n            </div>\n            <div class="modal-footer">\n              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>\n              <button type="button" class="btn btn-danger" id="confirm-delete-btn">\n                <i class="bi bi-trash me-2"></i>Delete\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    ');var a=document.querySelector("#delete-message-dialog"),s=document.querySelector("#confirm-delete-btn"),c=new bootstrap.Modal(a);s.addEventListener("click",i(o().mark(function r(){var a;return o().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,s.disabled=!0,s.innerHTML='<span class="spinner-border spinner-border-sm me-2"></span>Deleting...',r.next=5,axios({method:"DELETE",url:"/api/v1/messages/".concat(t)});case 5:(0,e.showAlert)("success","Message deleted!"),c.hide(),n(!0),r.next=15;break;case 10:r.prev=10,r.t0=r.catch(0),(0,e.showAlert)("error",(null===(a=r.t0.response)||void 0===a?void 0:a.data.message)||"Something went wrong!"),c.hide(),n(!1);case 15:case"end":return r.stop()}},r,null,[[0,10]])}))),a.addEventListener("hidden.bs.modal",function(){a.remove(),n(!1)}),c.show()})}function L(e,t){return S.apply(this,arguments)}function S(){return(S=i(o().mark(function r(a,s){var i,u,d,p;return o().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,(0,n.spinner)(f,"Loading messages"),1===v&&(g.innerHTML=""),c&&c.abort(),c=new AbortController,r.next=7,axios({method:"GET",url:"/api/v1/".concat(a,"/").concat(s,"/messages/message?page=").concat(v,"&limit=").concat(y,"&sort=-date"),signal:c.signal});case 7:i=r.sent,u=i.data.messages,d=i.data.totalPages,u.length>0?(f.innerHTML="",u.forEach(function(e){var t=document.createElement("div");t.classList.add("d-flex","flex-column","mb-2");var n=w(e.date);t.innerHTML='\n          <div class="message-card p-2 rounded">\n            <div class="d-flex justify-content-between gap-2 align-items-center mb-2">\n              <p class="top-message fw-bold m-0">'.concat(e.user.name.split(" ")[0],' <span class="date-message">(').concat(n,")</span></p>\n              ").concat(e.user._id===l?'\n                <div class="dropdown">\n                  <button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">\n                    <i class="bi bi-three-dots"></i>\n                  </button>\n                  <ul class="dropdown-menu">\n                    <li><button class="dropdown-item edit-message" data-id="'.concat(e._id,'"><i class="bi bi-pencil me-2"></i>Edit</button></li>\n                    <li><button class="dropdown-item text-danger delete-message" data-id="').concat(e._id,'"><i class="bi bi-trash me-2"></i>Delete</button></li>\n                  </ul>\n                </div>\n                '):"",'\n            </div>\n            <p class="text-break bottom-message">').concat(e.message,"</p>\n          </div>\n        "),f.appendChild(t)})):f.innerHTML='<p class="text-break" style="width: 80%">No messages yet!</p>',b=v<d,d>=1&&(0,t.renderPagination)(d,v,b,changeMessagePage),r.next=18;break;case 15:r.prev=15,r.t0=r.catch(0),"error"===(null===(p=r.t0.response)||void 0===p?void 0:p.data.status)?(0,e.showAlert)("error",r.t0.response.data.message):"CanceledError"!==r.t0.name&&(0,e.showAlert)("error","Something went wrong!");case 18:case"end":return r.stop()}},r,null,[[0,15]])}))).apply(this,arguments)}function E(e){return k.apply(this,arguments)}function k(){return(k=i(o().mark(function e(t){var n;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(t);case 2:if(!e.sent){e.next=11;break}return e.next=6,(0,r.fetchData)("/api/v1/".concat(p,"/").concat(d,"/messages/message?page=").concat(v,"&limit=").concat(y,"&sort=-date"));case 6:return n=e.sent,0===n.messages.length&&v>1&&v--,e.next=11,L(p,d);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function M(e,t,n,r){return q.apply(this,arguments)}function q(){return(q=i(o().mark(function t(n,r,a,s){var i,c,u,l,f,h,m,g,v,y,b,w,x,S;return o().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!r.querySelector(".edit-message-form")){t.next=2;break}return t.abrupt("return");case 2:if(n.classList.contains("btn-success")){t.next=17;break}return i=a.replace(/"/g,"&quot;"),c='\n      <div class="edit-message-form">\n        <div class="input-group">\n          <input type="text" class="form-control" value="'.concat(i,'" id="edit-input-').concat(s,'" data-original="').concat(i,'">\n          <button class="btn btn-success btn-sm confirm-edit" type="button" data-id="').concat(s,'">\n            <i class="bi bi-check"></i>\n          </button>\n          <button class="btn btn-secondary btn-sm cancel-edit" type="button" data-original="').concat(i,'">\n            <i class="bi bi-x"></i>\n          </button>\n        </div>\n      </div>\n    '),r.innerHTML=c,(u=document.querySelector("#edit-input-".concat(s))).focus(),u.select(),l=n.closest(".message-card"),(f=l.querySelector(".edit-message")).style.pointerEvents="none",f.style.opacity="0.5",h=n.closest(".dropdown"),h.querySelector(".dropdown-toggle").click(),t.abrupt("return");case 17:if(m=r.querySelector("input"),g=m.value.trim(),v=m.dataset.original,g){t.next=23;break}return(0,e.showAlert)("error","Message cannot be empty"),t.abrupt("return");case 23:if(g!==v){t.next=30;break}return r.innerHTML=v,y=n.closest(".message-card"),(b=y.querySelector(".edit-message")).style.pointerEvents="auto",b.style.opacity="1",t.abrupt("return");case 30:return t.prev=30,n.disabled=!0,n.innerHTML='<span class="spinner-border spinner-border-sm"></span>',t.next=35,axios({method:"PATCH",url:"/api/v1/messages/".concat(s),data:{message:g}});case 35:if("success"!==t.sent.data.status){t.next=40;break}return(0,e.showAlert)("success","Message updated!"),t.next=40,L(p,d);case 40:t.next=50;break;case 42:t.prev=42,t.t0=t.catch(30),(0,e.showAlert)("error",(null===(w=t.t0.response)||void 0===w||null===(w=w.data)||void 0===w?void 0:w.message)||"Failed to update message"),r.innerHTML=v,x=n.closest(".message-card"),(S=x.querySelector(".edit-message")).style.pointerEvents="auto",S.style.opacity="1";case 50:case"end":return t.stop()}},t,null,[[30,42]])}))).apply(this,arguments)}u&&L(p,d),f&&f.addEventListener("click",function(){var t=i(o().mark(function t(n){var r,a,s,i,c,u,l,f,h,m,g,v,y,b,w;return o().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("i"===(r=n.target).tagName.toLowerCase()&&(r=r.parentElement),a=r.closest(".message-card"),s=r.dataset.id,!r.classList.contains("edit-message")){t.next=9;break}return i=a.querySelector(".bottom-message"),c=i.textContent,t.next=9,M(r,i,c,s);case 9:if(!r.classList.contains("confirm-edit")){t.next=42;break}if(u=a.querySelector(".bottom-message"),l=u.querySelector("input"),f=l.value.trim(),h=l.dataset.original,f){t.next=17;break}return(0,e.showAlert)("error","Message cannot be empty"),t.abrupt("return");case 17:if(f!==h){t.next=23;break}return u.innerHTML=h,(m=a.querySelector(".edit-message")).style.pointerEvents="auto",m.style.opacity="1",t.abrupt("return");case 23:return t.prev=23,r.disabled=!0,r.innerHTML='<span class="spinner-border spinner-border-sm"></span>',t.next=28,axios({method:"PATCH",url:"/api/v1/messages/".concat(s),data:{message:f}});case 28:if("success"!==t.sent.data.status){t.next=33;break}return(0,e.showAlert)("success","Message updated!"),t.next=33,L(p,d);case 33:t.next=42;break;case 35:t.prev=35,t.t0=t.catch(23),(0,e.showAlert)("error",(null===(g=t.t0.response)||void 0===g||null===(g=g.data)||void 0===g?void 0:g.message)||"Failed to update message"),u.innerHTML=h,(v=a.querySelector(".edit-message")).style.pointerEvents="auto",v.style.opacity="1";case 42:if(r.classList.contains("cancel-edit")&&(y=a.querySelector(".bottom-message"),b=r.dataset.original,y.innerHTML=b,(w=a.querySelector(".edit-message")).style.pointerEvents="auto",w.style.opacity="1"),!r.classList.contains("delete-message")){t.next=46;break}return t.next=46,E(s);case 46:case"end":return t.stop()}},t,null,[[23,35]])}));return function(e){return t.apply(this,arguments)}}()),h&&h.addEventListener("submit",function(){var t=i(o().mark(function t(r){var a,s,i;return o().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),a=new FormData(h),t.prev=3,(0,n.buttonSpinner)(m,"Submit","Submitting"),t.next=7,axios({method:"POST",url:"/api/v1/".concat(p,"/").concat(d,"/messages"),data:{message:a.get("comment")},signal:c?c.signal:void 0});case 7:if(s=t.sent,i=s.data,console.log(i),"success"!==i.status){t.next=15;break}return(0,e.showAlert)("success","Message uploaded!"),document.querySelector("#message").value="",t.next=15,L(p,d);case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(3),(0,e.showAlert)("error",t.t0.response.data.message);case 20:return t.prev=20,(0,n.buttonSpinner)(m,"Submit","Submitting"),t.finish(20);case 23:case"end":return t.stop()}},t,null,[[3,17,20,23]])}));return function(e){return t.apply(this,arguments)}}()),window.changeMessagePage=function(e){e<1||(v=e,L(p,d))};
},{"../utils/alerts.js":"VDCA","../utils/renderPagination.js":"rc7b","../utils/spinner.js":"Zpwf","../utils/http.js":"WyUo"}],"bMf3":[function(require,module,exports) {
"use strict";var t=require("../utils/alerts.js"),r=require("../utils/spinner.js");function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(){n=function(){return r};var t,r={},o=Object.prototype,i=o.hasOwnProperty,a=Object.defineProperty||function(t,r,e){t[r]=e.value},u="function"==typeof Symbol?Symbol:{},c=u.iterator||"@@iterator",s=u.asyncIterator||"@@asyncIterator",l=u.toStringTag||"@@toStringTag";function f(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{f({},"")}catch(t){f=function(t,r,e){return t[r]=e}}function h(t,r,e,n){var o=r&&r.prototype instanceof w?r:w,i=Object.create(o.prototype),u=new N(n||[]);return a(i,"_invoke",{value:k(t,e,u)}),i}function p(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}r.wrap=h;var y="suspendedStart",v="suspendedYield",g="executing",d="completed",m={};function w(){}function b(){}function L(){}var x={};f(x,c,function(){return this});var E=Object.getPrototypeOf,S=E&&E(E(q([])));S&&S!==o&&i.call(S,c)&&(x=S);var j=L.prototype=w.prototype=Object.create(x);function O(t){["next","throw","return"].forEach(function(r){f(t,r,function(t){return this._invoke(r,t)})})}function _(t,r){function n(o,a,u,c){var s=p(t[o],t,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==e(f)&&i.call(f,"__await")?r.resolve(f.__await).then(function(t){n("next",t,u,c)},function(t){n("throw",t,u,c)}):r.resolve(f).then(function(t){l.value=t,u(l)},function(t){return n("throw",t,u,c)})}c(s.arg)}var o;a(this,"_invoke",{value:function(t,e){function i(){return new r(function(r,o){n(t,e,r,o)})}return o=o?o.then(i,i):i()}})}function k(r,e,n){var o=y;return function(i,a){if(o===g)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var c=T(u,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===y)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=g;var s=p(r,e,n);if("normal"===s.type){if(o=n.done?d:v,s.arg===m)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=d,n.method="throw",n.arg=s.arg)}}}function T(r,e){var n=e.method,o=r.iterator[n];if(o===t)return e.delegate=null,"throw"===n&&r.iterator.return&&(e.method="return",e.arg=t,T(r,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=p(o,r.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,m;var a=i.arg;return a?a.done?(e[r.resultName]=a.value,e.next=r.nextLoc,"return"!==e.method&&(e.method="next",e.arg=t),e.delegate=null,m):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,m)}function P(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function G(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function q(r){if(r||""===r){var n=r[c];if(n)return n.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var o=-1,a=function e(){for(;++o<r.length;)if(i.call(r,o))return e.value=r[o],e.done=!1,e;return e.value=t,e.done=!0,e};return a.next=a}}throw new TypeError(e(r)+" is not iterable")}return b.prototype=L,a(j,"constructor",{value:L,configurable:!0}),a(L,"constructor",{value:b,configurable:!0}),b.displayName=f(L,l,"GeneratorFunction"),r.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===b||"GeneratorFunction"===(r.displayName||r.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,L):(t.__proto__=L,f(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},r.awrap=function(t){return{__await:t}},O(_.prototype),f(_.prototype,s,function(){return this}),r.AsyncIterator=_,r.async=function(t,e,n,o,i){void 0===i&&(i=Promise);var a=new _(h(t,e,n,o),i);return r.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},O(j),f(j,l,"Generator"),f(j,c,function(){return this}),f(j,"toString",function(){return"[object Generator]"}),r.keys=function(t){var r=Object(t),e=[];for(var n in r)e.push(n);return e.reverse(),function t(){for(;e.length;){var n=e.pop();if(n in r)return t.value=n,t.done=!1,t}return t.done=!0,t}},r.values=q,N.prototype={constructor:N,reset:function(r){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(G),!r)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var e=this;function n(n,o){return u.type="throw",u.arg=r,e.next=n,o&&(e.method="next",e.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],u=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=i.call(a,"catchLoc"),s=i.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=r&&r<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=r,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),m},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),G(e),m}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;G(e)}return o}}throw Error("illegal catch attempt")},delegateYield:function(r,e,n){return this.delegate={iterator:q(r),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=t),m}},r}function o(t,r,e,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?r(c):Promise.resolve(c).then(n,o)}function i(t){return function(){var r=this,e=arguments;return new Promise(function(n,i){var a=t.apply(r,e);function u(t){o(a,n,i,u,c,"next",t)}function c(t){o(a,n,i,u,c,"throw",t)}u(void 0)})}}var a=document.querySelector("#login-form"),u=document.querySelector("#login-button"),c=document.querySelector("#logout-form"),s=document.querySelector("#logout-button");a&&a.addEventListener("submit",function(){var e=i(n().mark(function e(o){var i,c,s;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o.preventDefault(),i=new FormData(a),c=i.get("email"),s=i.get("password"),e.prev=4,(0,r.buttonSpinner)(u,"Login","Logging in"),e.next=8,axios({method:"POST",url:"/api/v1/users/login",data:{email:c,password:s}});case 8:"success"===e.sent.data.status&&((0,t.showAlert)("success","Logged in successfully!"),window.setTimeout(function(){location.assign("/")},500)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),(0,t.showAlert)("error",e.t0.response.data.message);case 15:return e.prev=15,(0,r.buttonSpinner)(u,"Login","Logging in"),e.finish(15);case 18:case"end":return e.stop()}},e,null,[[4,12,15,18]])}));return function(t){return e.apply(this,arguments)}}()),c&&c.addEventListener("submit",function(){var e=i(n().mark(function e(o){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o.preventDefault(),e.prev=1,(0,r.buttonSpinner)(s,"Log out","Logging out"),e.next=5,axios({method:"GET",url:"/api/v1/users/logout"});case 5:"success"===e.sent.data.status&&((0,t.showAlert)("warning","Logged out successfully!"),window.setTimeout(function(){location.assign("/")},2e3)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),"error"===e.t0.response.data.status&&((0,t.showAlert)("error","".concat(e.t0.response.data.message,". Logging out...")),window.setTimeout(function(){location.assign("/")},2e3));case 12:return e.prev=12,(0,r.buttonSpinner)(s,"Log out","Logging out"),e.finish(12);case 15:case"end":return e.stop()}},e,null,[[1,9,12,15]])}));return function(t){return e.apply(this,arguments)}}());
},{"../utils/alerts.js":"VDCA","../utils/spinner.js":"Zpwf"}],"UYjs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.payWithStripe=void 0;var t=require("../utils/alerts.js"),e=require("../utils/spinner.js");function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(){n=function(){return e};var t,e={},o=Object.prototype,i=o.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},c="function"==typeof Symbol?Symbol:{},u=c.iterator||"@@iterator",s=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function h(t,e,r,n){var o=e&&e.prototype instanceof w?e:w,i=Object.create(o.prototype),c=new G(n||[]);return a(i,"_invoke",{value:k(t,r,c)}),i}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var y="suspendedStart",v="suspendedYield",d="executing",m="completed",g={};function w(){}function b(){}function x(){}var L={};f(L,u,function(){return this});var E=Object.getPrototypeOf,S=E&&E(E(D([])));S&&S!==o&&i.call(S,u)&&(L=S);var P=x.prototype=w.prototype=Object.create(L);function O(t){["next","throw","return"].forEach(function(e){f(t,e,function(t){return this._invoke(e,t)})})}function _(t,e){function n(o,a,c,u){var s=p(t[o],t,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==r(f)&&i.call(f,"__await")?e.resolve(f.__await).then(function(t){n("next",t,c,u)},function(t){n("throw",t,c,u)}):e.resolve(f).then(function(t){l.value=t,c(l)},function(t){return n("throw",t,c,u)})}u(s.arg)}var o;a(this,"_invoke",{value:function(t,r){function i(){return new e(function(e,o){n(t,r,e,o)})}return o=o?o.then(i,i):i()}})}function k(e,r,n){var o=y;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===y)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=p(e,r,n);if("normal"===s.type){if(o=n.done?m:v,s.arg===g)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=m,n.method="throw",n.arg=s.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var i=p(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function N(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function G(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(N,this),this.reset(!0)}function D(e){if(e||""===e){var n=e[u];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(i.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(r(e)+" is not iterable")}return b.prototype=x,a(P,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,f(t,l,"GeneratorFunction")),t.prototype=Object.create(P),t},e.awrap=function(t){return{__await:t}},O(_.prototype),f(_.prototype,s,function(){return this}),e.AsyncIterator=_,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new _(h(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},O(P),f(P,l,"Generator"),f(P,u,function(){return this}),f(P,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=D,G.prototype={constructor:G,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=i.call(a,"catchLoc"),s=i.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),T(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:D(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function o(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function i(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function c(t){o(a,n,i,c,u,"next",t)}function u(t){o(a,n,i,c,u,"throw",t)}c(void 0)})}}var a=document.querySelector("#payment-stripe-form"),c=document.querySelector("#pay-dues-button"),u=Stripe("pk_test_51QwOPPClThVOR2ixkE3rzDKQQYLle1QBOujl0hWgtIpWH94iMUulfvWPPeHakIrWMD2XeE2zZdXHUSNNDH2BUJik00A03piR06"),s=exports.payWithStripe=function(){var e=i(n().mark(function e(r,o){var i;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,axios("/api/v1/payments/payment-session",{method:"POST",data:{fromDate:r,toDate:o}});case 3:return i=e.sent,e.next=6,u.redirectToCheckout({sessionId:i.data.session.id});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),(0,t.showAlert)("error",e.t0.response.data.message);case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t,r){return e.apply(this,arguments)}}();a&&a.addEventListener("submit",function(){var r=i(n().mark(function r(o){var i,u,l;return n().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(o.preventDefault(),i=new FormData(a),u=i.get("from-date"),l=i.get("to-date"),u&&l){r.next=6;break}return r.abrupt("return",(0,t.showAlert)("error","Please select a valid date range."));case 6:return r.prev=6,(0,e.buttonSpinner)(c,'Pay with Stripe <i class="bi bi-stripe"></i>',"Processing payment"),r.next=10,s(u,l);case 10:r.next=16;break;case 12:r.prev=12,r.t0=r.catch(6),console.log(r.t0.response),(0,t.showAlert)("error",r.t0.response.data.message);case 16:return r.prev=16,(0,e.buttonSpinner)(c,'Pay with Stripe <i class="bi bi-stripe"></i>',"Processing payment"),r.finish(16);case 19:case"end":return r.stop()}},r,null,[[6,12,16,19]])}));return function(t){return r.apply(this,arguments)}}());
},{"../utils/alerts.js":"VDCA","../utils/spinner.js":"Zpwf"}],"FOFv":[function(require,module,exports) {
"use strict";var t=require("../utils/spinner.js"),e=require("../utils/http.js"),r=require("../utils/alerts.js");function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(){o=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},c="function"==typeof Symbol?Symbol:{},u=c.iterator||"@@iterator",s=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function h(t,e,r,n){var o=e&&e.prototype instanceof w?e:w,i=Object.create(o.prototype),c=new q(n||[]);return a(i,"_invoke",{value:_(t,r,c)}),i}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var v="suspendedStart",d="suspendedYield",y="executing",g="completed",m={};function w(){}function b(){}function x(){}var L={};f(L,u,function(){return this});var E=Object.getPrototypeOf,k=E&&E(E(A([])));k&&k!==r&&i.call(k,u)&&(L=k);var S=x.prototype=w.prototype=Object.create(L);function j(t){["next","throw","return"].forEach(function(e){f(t,e,function(t){return this._invoke(e,t)})})}function O(t,e){function r(o,a,c,u){var s=p(t[o],t,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==n(f)&&i.call(f,"__await")?e.resolve(f.__await).then(function(t){r("next",t,c,u)},function(t){r("throw",t,c,u)}):e.resolve(f).then(function(t){l.value=t,c(l)},function(t){return r("throw",t,c,u)})}u(s.arg)}var o;a(this,"_invoke",{value:function(t,n){function i(){return new e(function(e,o){r(t,n,e,o)})}return o=o?o.then(i,i):i()}})}function _(e,r,n){var o=v;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===g){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===v)throw o=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var s=p(e,r,n);if("normal"===s.type){if(o=n.done?g:d,s.arg===m)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=g,n.method="throw",n.arg=s.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=p(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function q(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function A(e){if(e||""===e){var r=e[u];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(i.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(n(e)+" is not iterable")}return b.prototype=x,a(S,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,f(t,l,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},j(O.prototype),f(O.prototype,s,function(){return this}),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(h(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},j(S),f(S,l,"Generator"),f(S,u,function(){return this}),f(S,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=A,q.prototype={constructor:q,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=i.call(a,"catchLoc"),s=i.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:A(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function i(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function a(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var a=t.apply(e,r);function c(t){i(a,n,o,c,u,"next",t)}function u(t){i(a,n,o,c,u,"throw",t)}c(void 0)})}}var c=document.querySelector("#bookDetailsSection"),u=document.querySelector("#eventBookedTable"),s=document.querySelector("#eventTableBody"),l=document.querySelector("#bookEventPlace"),f=document.querySelector("#buttonEventSubmit");function h(){return p.apply(this,arguments)}function p(){return(p=a(o().mark(function n(){var i,a,c;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return(0,t.spinner)(s,"Loading"),n.prev=1,n.next=4,(0,e.fetchData)("api/v1/eventsresident/myevent");case 4:i=n.sent,a=i.data,s.innerHTML="",a.doc.length>0?a.doc.map(function(t){var e=new Date(t.date).toLocaleString("en-PH",{year:"numeric",month:"long",day:"2-digit",hour12:!0,hour:"2-digit",minute:"2-digit"}),r="\n        <tr>\n          <td>".concat(e,"</td>\n          <td>").concat(t.place,"</td>\n          <td>").concat(t.approved?"Approved":"Pending","</td>\n        </tr>\n      ");s.innerHTML+=r}):s.innerHTML='\n        <tr>\n          <td colspan="100%" class="text-slate-600">No events booked</td>\n        </tr>',n.next=13;break;case 10:n.prev=10,n.t0=n.catch(1),(0,r.showAlert)("error",(null===(c=n.t0.response)||void 0===c||null===(c=c.data)||void 0===c?void 0:c.message)||n.t0.message||"An error occurred while fetching events.");case 13:case"end":return n.stop()}},n,null,[[1,10]])}))).apply(this,arguments)}c&&(h(),l.addEventListener("submit",function(){var n=a(o().mark(function n(i){var a,c,u,s,p,v,d,y;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i.preventDefault(),a=new FormData(i.target),c=Object.fromEntries(a.entries()),u=c.place,s=c.date,p=c.time,v=new Date("".concat(s,"T").concat(p)),n.prev=4,(0,t.buttonSpinner)(f,"Book Event","Booking"),n.next=8,(0,e.postData)("/api/v1/eventsresident",{date:v,place:u});case 8:if("success"!==(d=n.sent).status){n.next=16;break}return(0,r.showAlert)("success","Event booked successfully."),l.reset(),n.next=14,h();case 14:n.next=17;break;case 16:throw new Error(d.message||"Failed to book event.");case 17:n.next=22;break;case 19:n.prev=19,n.t0=n.catch(4),(0,r.showAlert)("error",(null===(y=n.t0.response)||void 0===y||null===(y=y.data)||void 0===y?void 0:y.message)||n.t0.message||"An error occurred while booking the event.");case 22:return n.prev=22,(0,t.buttonSpinner)(f,"Book Event","Booking"),n.finish(22);case 25:case"end":return n.stop()}},n,null,[[4,19,22,25]])}));return function(t){return n.apply(this,arguments)}}()));
},{"../utils/spinner.js":"Zpwf","../utils/http.js":"WyUo","../utils/alerts.js":"VDCA"}],"Focm":[function(require,module,exports) {
"use strict";require("./Project/projects.js"),require("./Admin/admin_dashboard.js"),require("./Admin/admin_edit-project-event.js"),require("./Admin/admin_address.js"),require("./Admin/admin_manual_payment.js"),require("./Admin/admin_create_user.js"),require("./Admin/admin_update_user.js"),require("./Admin/admin_accept_event_bookings.js"),require("./Admin/garbageCollectionManagement.js"),require("./Event/events.js"),require("./Message/message.js"),require("./Login/login.js"),require("./Payment/payment.js"),require("./Me/me.js"),require("./Me/bookEvent.js");
},{"./Project/projects.js":"mLZw","./Admin/admin_dashboard.js":"D52Z","./Admin/admin_edit-project-event.js":"xJwD","./Admin/admin_address.js":"SCzO","./Admin/admin_manual_payment.js":"iwVb","./Admin/admin_create_user.js":"FKYw","./Admin/admin_update_user.js":"XRq8","./Admin/admin_accept_event_bookings.js":"qkXa","./Admin/garbageCollectionManagement.js":"Easi","./Event/events.js":"l2Pd","./Message/message.js":"Myku","./Login/login.js":"bMf3","./Payment/payment.js":"UYjs","./Me/me.js":"yxtE","./Me/bookEvent.js":"FOFv"}]},{},["Focm"], null)
//# sourceMappingURL=/bundle.js.map